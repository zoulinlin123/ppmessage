function $yvAjaxService(e,t,n,r,_,o,a,s,i){var u=function(e){var t="/ppauth/token",r=e,_={};return _.url=t,_.method="POST",_.data=r,_.headers={"Content-Type":"application/x-www-form-urlencoded"},s.d("AUTH POST url: %s, data: %o.",_.url,_.data),n(_)},c=function(e){var t="grant_type=password&user_email="+e.user_email+"&user_password="+e.user_password+"&client_id="+o.PPCONSOLE_API.key;return u(t)},l=function(){var e="grant_type=client_credentials&client_secret="+o.PPCONSOLE_API.secret+"&client_id="+o.PPCONSOLE_API.key;return u(e)},p=function(e,t,r){t=t||{};var _="/api"+e,o=r;return o=o.replace(/\"/g,""),n({headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"OAuth "+o},method:"POST",cache:!1,url:_,data:t})},A=function(e,t){return p(e,t,r.get(o.COOKIE_KEY.ACCESS_TOKEN))},E={NO_ERR:0,NO_PARA:6,EX_USER:22};return{login:function(e){return c(e)},ppconsole_get_overview_number:function(e){return A("/PPCONSOLE_GET_OVERVIEW_NUMBER",{app_uuid:e})},ppconsole_get_real_time_customer_number:function(e){return A("/PPCONSOLE_GET_REAL_TIME_CUSTOMER_NUMBER",{app_uuid:e})},ppconsole_get_real_time_service_number:function(e){return A("/PPCONSOLE_GET_REAL_TIME_SERVICE_NUMBER",{app_uuid:e})},ppconsole_get_real_time_message_number:function(e){return A("/PPCONSOLE_GET_REAL_TIME_MESSAGE_NUMBER",{app_uuid:e})},ppconsole_get_service_number_by_range:function(e,t,n){return A("/PPCONSOLE_GET_SERVICE_NUMBER_BY_RANGE",{app_uuid:e,begin_date:t,end_date:n})},ppconsole_get_customer_number_by_range:function(e,t,n){return A("/PPCONSOLE_GET_CUSTOMER_NUMBER_BY_RANGE",{app_uuid:e,begin_date:t,end_date:n})},ppconsole_get_message_number_by_range:function(e,t,n){return A("/PPCONSOLE_GET_MESSAGE_NUMBER_BY_RANGE",{app_uuid:e,begin_date:t,end_date:n})},logout:function(e){return A("/PPCONSOLE_LOGOUT",{user_uuid:e})},get_user_detail:function(e){return A("/PP_GET_USER_DETAIL",{user_uuid:e})},get_user_detail_with_password:function(e){return A("/PP_GET_USER_DETAIL",{user_uuid:e,return_password:!0})},get_admin_detail:function(e){return A("/PP_GET_ADMIN_DETAIL",{user_uuid:e})},get_admin_detail_with_password:function(e){return A("/PP_GET_ADMIN_DETAIL",{user_uuid:e,return_password:!0})},create_app:function(e,t){return A("/PP_CREATE_APP",{user_uuid:e,app_name:t})},remove_app:function(e,t,n){return A("/PP_REMOVE_APP",{user_uuid:e,app_uuid:t,app_key:n})},leave_app:function(e,t){return A("/PP_LEAVE_APP",{user_list:e,app_uuid:t})},is_email_valid:function(e){return A("/PP_IS_EMAIL_VALID",e)},get_app_owned_by_user:function(e){return A("/PP_GET_APP_OWNED_BY_USER",{user_uuid:e})},update_app_info:function(e){return A("/PP_UPDATE_APP_INFO",e)},create_user:function(e){return A("/PP_CREATE_USER",e)},update_user:function(e){return A("/PP_UPDATE_USER",e)},remove_user:function(e){return A("/PP_REMOVE_USER",{user_uuid:e})},get_app_conversation_list:function(e){return A("/PP_GET_APP_CONVERSATION_LIST",e)},get_history_messages:function(e){return A("/PP_GET_HISTORY_MESSAGE",e)},create_org_group:function(e){return A("/PP_CREATE_ORG_GROUP",e)},get_group_list:function(e){return A("/PP_GET_APP_ORG_GROUP_LIST",e)},get_group_detail:function(e){return A("/PP_GET_ORG_GROUP_DETAIL",e)},get_group_user_list:function(e){return A("/PP_GET_ORG_GROUP_USER_LIST",e)},update_group:function(e){return A("/PP_UPDATE_ORG_GROUP",e)},remove_group:function(e){return A("/PP_REMOVE_ORG_GROUP",e)},add_group_user:function(e){return A("/PP_ADD_ORG_GROUP_USER",e)},remove_group_user:function(e){return A("/PP_REMOVE_ORG_GROUP_USER",e)},get_no_group_user_list:function(e){return A("/PP_GET_NO_GROUP_USER_LIST",e)},get_team_service_user_list:function(e){return A("/PP_GET_APP_SERVICE_USER_LIST",e)},get_api_info:function(e){return A("/PP_GET_API_INFO",e)},get_credentials_token:function(){return l()},signup:function(e,t){return p("/PPCONSOLE_SIGNUP",e,t)},send_new_password:function(e,t){return p("/PPCONSOLE_SEND_NEW_PASSWORD",e,t)},get_all_apps:function(e){return A("/PP_GET_ALL_APP_LIST",e)},auth:function(e){return c(e)},API_ERR:E}}function $yvUserService(){var e={uuid:null,app_uuid:null,session_uuid:null,email:null,fullname:null,icon:null,lang:null,role:null,logined:!1,password:null,status:null,firstname:null,lastname:null,company:null,team:null,access_token:null};return{get:function(t){return 0===arguments.length?e:e.hasOwnProperty(t)?e[t]:null},set:function(t,n){e.hasOwnProperty(t)&&(e[t]=n)},is_admin_user:function(){return e&&"ADMIN"===e.status},set_company:function(t){e.company=t},get_company:function(){return e.company},set_lastname:function(t){e.lastname=t},get_lastname:function(){return e.lastname},set_firstname:function(t){e.firstname=t},get_firstname:function(){return e.firstname},set_status:function(t){e.status=t},get_status:function(){return e.status},get_password:function(){return e.password},set_password:function(t){e.password=t},get_session:function(){return e.session_uuid},set_session:function(t){e.session_uuid=t},set_email:function(t){e.email=t},get_email:function(){return e.email},set_fullname:function(t){e.fullname=t},get_fullname:function(){return e.fullname},set_icon:function(t){e.icon=t},get_icon:function(){return e.icon},set_uuid:function(t){e.uuid=t},get_uuid:function(){return e.uuid},set_language:function(t){e.lang=t},get_language:function(){return e.lang},set_role:function(t){e.role=t},get_role:function(){return e.role},set_logined:function(t){e.logined=t},get_logined:function(){return e.logined},set_app_uuid:function(t){e.app_uuid=t},get_app_uuid:function(){return e.app_uuid},set_team:function(t){null==e.team&&(e.team={}),t||(e.team=t);for(var n in t)t.hasOwnProperty(n)&&(e.team[n]=t[n])},get_team:function(){return e.team},set_team_agent:function(t){e.team.agent_num=t},get_team_agent:function(){return e.team.agent_num},set_login_data:function(e){this.set_logined(!0),this.set_fullname(e.user_fullname),this.set_lastname(e.user_lastname),this.set_firstname(e.user_firstname),this.set_company(e.user_company),this.set_email(e.user_email),this.set_session(e.session_uuid),this.set_uuid(e.uuid),this.set_password(e.user_password),this.set_app_uuid(e.app_uuid),this.set_icon(e.user_icon),this.set_status(e.user_status)},logout:function(){for(var t in e)e[t]=null;e.logined=!1,console.log("===",this.get())}}}function $yvMime(){var e=function(e){var t="../img/",n=t+"document-word.png",r=t+"document-xls.png",_=t+"document-pdf.png",o=t+"document-ppt.png",a=t+"document-plain.png",s={"application/vnd.openxmlformats-officedocument.wordprocessingml.document":n,"application/msword":n,"application/vnd.ms-excel":r,"application/x-excel":r,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":r,"application/vnd.ms-powerpoint":o,"application/vnd.openxmlformats-officedocument.presentationml.presentation":o,"application/vnd.ms-powerpoint":o,"application/vnd.openxmlformats-officedocument.presentationml.slideshow":o,"application/pdf":_};return s.hasOwnProperty(e)?s[e]:a};return{mime_icon:function(t){return e(t)}}}function $yvUtilService(e,t,n,r,_,o){var a=function(e){return-1==e.indexOf("ppmessage.cn")},s=function(){return{getMessageSummary:function(e,t,n){if(!e||!t||!n)return"";var r=e;switch(t){case"TEXT":return n;case"FILE":return"["+r["statistics.historymessages.MESSAGE_FILE_TYPE_TAG"]+"] "+JSON.parse(n).name;case"IMAGE":return"["+r["statistics.historymessages.MESSAGE_IMAGE_TYPE_TAG"]+"]";case"TXT":return"["+r["statistics.historymessages.MESSAGE_TXT_TYPE_TAG"]+"]";default:return""}},getMessageFormatedDate:function(e){if(!e)return"";if(e.message_body&&"string"==typeof e.message_body){var t=JSON.parse(e.message_body);return moment.unix(t.ts).format("YYYY-MM-DD HH:mm")}return u.moment(e.updatetime).format("YYYY-MM-DD HH:mm")},getConversationUpdateTsInSeconds:function(e){if(!e)return 0;if(e.latest_message){var t=e.latest_message.message_body;if(t&&"string"==typeof t)return JSON.parse(t).ts}return u.moment(e.updatetime).unix()}}}(),i=function(){var e=_.DEFAULT_USER_ICON;return{getIcon:function(t){if(!t)return e;var n=/(^https?:\/\/)|(^w{3})/.test(t);return n?t:c.getFileDownloadUrl(t)}}}(),u=function(){return{moment:function(e){return moment(e,"YYYY-MM-DD HH:mm:ss SSS")}}}(),c=function(){return{getFileDownloadUrl:function(e,t){var n="/download/download/"+e;return t&&(n+="?file_name="+t),n},getRemoteTextFileContent:function(e,t,r){return n({method:"GET",cache:!1,url:e,cache:!1}).success(function(e){t&&t(e)}).error(function(e){r&&r(e)})}}}(),l=function(){var e=1,t=16,n={OK:0,MIN_LENGTH_LIMIT:1,MAX_LENGTH_LIMIT:2,CONTAIN_WHITESPACE_AT_HEAD_OR_TAIL:3,REPEAT_PASSWORD_MIS_MATCH:4};return{ERR_CODE:n,validatePassword:function(r){return!r||r.length<e?n.MIN_LENGTH_LIMIT:r.length>t?n.MAX_LENGTH_LIMIT:/(^\s+)|(\s+$)/g.test(r)?n.CONTAIN_WHITESPACE_AT_HEAD_OR_TAIL:n.OK},validateRepeatPassword:function(e,t){var r=this.validatePassword(e);return r!==n.OK?r:e!==t?n.REPEAT_PASSWORD_MIS_MATCH:n.OK}}}();return{translate:function(n,r,_,o){var a=function(){t(_).then(function(e){n[r]=e,o&&o()})},s=e.$on("$translateChangeSuccess",a);a(),n.$on("$destroy",function(){s()})},noti:function(e,t){var n="danger";t&&(n="success"),$.bootstrapGrowl(e,{ele:"body",type:n,offset:{from:"top",amount:20},align:"center",width:400,delay:4e3,allow_dismiss:!0,stackup_spacing:10})},uuid:function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)});return t},get_view_port:function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},is_valid_email:function(e){var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return t.test(e)},base64_decode:function(e){return r.decode(e)},base64_encode:function(e){return r.encode(e)},http_protocol:function(e){return a(e)?"http://":"https://"},ws_protocol:function(e){return a(e)?"ws://":"wss://"},regexp_check:function(e){var t=RegExp("[\\u4E00-\\u9FFF\\dA-z@-_\\s*]+","i");if(!e||!e.match(t))return!1;var n=e.match(t).toString().length;return n==e.length},formateTimestamp:function(e){var t=moment(e).format("YYYY-MM-DD HH:mm:ss");return t},messageUtil:s,iconUtil:i,dateUtil:u,fileUtil:c,validator:l,isNull:function(e){return void 0===e||null===e}}}function $yvLog(){function e(){var e="%c↓↓↓↓↓↓↓↓↓↓";return t(e,"font-size:28px; color:blue;"),this}function t(){if(r){var e=Array.prototype.slice.call(arguments);a?console.log.apply(console,e):console.log(e)}return this}function n(){if(_){var e=Array.prototype.slice.call(arguments);a?console.log.apply(console,e):console.log(e)}return this}var r=!0,_=!0,o=!("undefined"==typeof console||"undefined"==typeof console.log),a=o&&!("unknown"==typeof console.log.apply||"undefined"==typeof console.log.apply);return{h:e,d:t,w:n}}!function(){window&&void 0===window.ppconsole&&(window.ppconsole={version:"0.0.0.2"})}(),function(){for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],r=n.length,_=window.console=window.console||{};r--;)e=n[r],_[e]||(_[e]=t)}(),angular.module("this_app.constants",[]).constant("yvConstants",{PPCONSOLE_API:{uuid:"{ppconsole_api_uuid}",key:"{ppconsole_api_key}",secret:"{ppconsole_api_secret}"},PPMESSAGE_APP:{uuid:"{ppmessage_app_uuid}"},COOKIE_KEY:{LOGINED_USER_UUID:"cookie_ppconsole_user_logined_user_uuid",ACTIVE_USER_UUID:"cookie_ppconsole_user_user_uuid",ACCESS_TOKEN:"cookie_ppconsole_user_access_token"},BROADCAST_EVENT_KEY:{LOGIN_FINISHED:"event:login:finished",REFRESH_PAGE:"event:refreshpage"},MAX_TEXT_LEN:128,TEMPLATE_PREFIX:"templates/",STATIC_PREFIX:"/ppconsole/static/",DEFAULT_USER_ICON:"/ppconsole/static/img/default-user.png",MESSAGE_TYPE:{NOTI:"NOTI"},MESSAGE_SUBTYPE:{AUDIO:"AUDIO",VIDEO:"VIDEO",DOCUMENT:"DOCUMENT",FILE:"FILE",TEXT:"TEXT",IMAGE:"IMAGE",SINGLE_CARD:"SINGLE_CARD",MULTIPLE_CARD:"MULTIPLE_CARD",TXT:"TXT",MENU:"MENU",EVENT:"EVENT",GPS_LOCATION:"GPS_LOCATION",INVITE_CONTACT:"INVITE_CONTACT",ACCEPT_CONTACT:"ACCEPT_CONTACT",REMOVE_CONTACT:"REMOVE_CONTACT",DG_INVITED:"DG_INVITED",DG_REMOVED:"DG_REMOVED",REQUEST_JOIN_OG:"REQUEST_JOIN_OG",APPROVE_JOIN_OG:"APPROVE_JOIN_OG",LOGOUT:"LOGOUT"},YVOBJECT:{DU:"DU",AU:"AU",AG:"AG",OG:"OG"},OS:{IOS:"IOS",AND:"AND",WP:"WP",CHROME:"CHROME",MAC:"MAC",WIN:"WIN"},SEND_STATUS:{SEND_PENDING:"SEND_PENDING",SEND_CHECKING:"SEND_CHECKING",SEND_UPLOADING:"SEND_UPLOADING",SEND_SENDING:"SEND_SENDING",SEND_SUCCESS:"SEND_SUCCESS",SEND_ERROR:"SEND_ERROR"},MESSAGE_DIR:{DIR_IN:"DIR_IN",DIR_OUT:"DIR_OUT"},USER_STATUS:{OWNER_0:"app.main",OWNER_1:"app.main",OWNER_2:"app.settings.overview",ANONYMOUS:"app.main",THIRDPARTY:"app.main"}}),angular.module("this_app.i18n",["pascalprecht.translate"]).constant("yvTransTags",{en:{COPYRIGHT_PPMESSAGE:"PPMESSAGE.",global:{SUBMIT_TAG:"Submit",DELETE_TEAM_TAG:"Delete Team",DELETE_TEAM_NOTE_TAG:"Delete team will remove all your team data from this site. Any question please use the chat launcher button to contact the service agent.",DELETE_TEAM_CONFIRM_TAG:"Confirm Delete",DELETE_TEAM_CANCEL_TAG:"Cancel Delete",DELETE_TEAM_NOTE_DATA_TAG:"Delete, mean remove all data related the team.",DELETE_TEAM_NOTE_MEAN_TAG:"Make sure understand?",PARAMS_MISS_TAG:"Params miss",FULLNAME_ERROR_TAG:"Fullname empty or out of length",NO_FIRSTNAME_TAG:"Please input your first name.",NO_LASTNAME_TAG:"Please input your last name.",NO_FULLNAME_TAG:"fullname required",NO_EMAIL_TAG:"email required",NO_PASSWORD_TAG:"password required",NO_RPASSWORD_TAG:"repeat password required",NO_AGREE_TAG:"agreement agree required",PASSWORD_NOT_MATCHED_TAG:"password not matched",EMAIL_USED_TAG:"This email already has been taken.",SIGNUP_ERROR_TAG:"signup meet error",SIGNUP_SUCCESS_TAG:"signup successfully",SERVICE_ERROR_TAG:"Signup service error.",FULLNAME_UNREGULAR_TAG:"Illegal fullname",PASSWORD_UNREGULAR_TAG:"Illegal password",FIRST_NAME_TOO_LONG_TAG:"First name is too long",LAST_NAME_TOO_LONG_TAG:"Last name is too long",EMAIL_TOO_LONG_TAG:"Email is too long",COMPANY_NAME_TOO_LONG_TAG:"Company name is too long",EMAIL_UNREACHABLE_TAG:"Email is unreachable",EMAIL_LOGIN_ERROR_TAG:"System busy,cann't send email，please try again or contact us",EMAIL_SENDING_ERROR_TAG:"Sending email encounter an error.please contact us or jusr try again",LENGTH_OUT_OF_RANGE_TAG:"Length out of range",ERR_PASSWORD_CONTAINS_WHITESPACE_AT_HEAD_OR_TAIL:"Password contains whitespace at head or tail",SIGNUP_TAG:"Sign Up",SIGNIN_TAG:"Sign In",RESET_PASSWORD_TAG:"Reset Password",CREATE_TEAM_TAG:"Create Team",START_TAG:"Start",FULLNAME_TAG:"Full Name",LOGIN_NAME_TAG:"Login Email",LOGIN_PASSWORD_TAG:"Password",LOGIN_PASSWORD_REPEAT_TAG:"Password Repeat",SERVICE_TEAM_TAG:"Service Team",AGREE_SERVICE_TEAM_TAG:"Agree with ",MAKE_NAME_FOR_YOURTEAM:"Make an amazing name for your team !",TEAM_NAME:"Team name",CONGRATULATIONS:"Congratulations! customer service team create success",YOU_WILL_EXPERIENCE:"You will experience",ANY_TRAFFIC:"Any traffic",ANY_MESSAGE:"Any number of messages",YOU_CAN:"Start use, you can: ",DEPLOY_CODE:"Deploy you code",ADD_SERVICE_USER:"Add service user",MODIFY_SETTINGS:"Modify information",USER_ACCOUNT_TAG:"User Account",SIGNIN_FAILED_TAG:"sign in failed.",SEND_NEW_PASSWORD_TAG:"Send new password email",SEND_NEW_PASSWORD_SUCCESS_TAG:"Success to send new password to your email.",SEND_NEW_PASSWORD_FAILED_TAG:"Fail to send new password to your email.",UPDATE_PUSH_CONFIG_SUCCESS_TAG:"Success to update push config.",UPDATE_PUSH_CONFIG_FAILED_TAG:"Failed to update push config."},app:{MY_PROFILE_TAG:"My Profile",LOGOUT_TAG:"Logout",LOGIN_TAG:"Login",DOWNLOAD:"Download",CONTACT_US:"Contact us",START_SERVICE_TAG:"Start service",PRIVATE_CONFIG_TAG:"Private settings",TEAM_CONFIG_TAG:"Team settings",EXIT_APP_TAG:"Log Out",SIGNUP_TAG:"Sign Up",LOGIN_TAG:"Sign In",SLOGAN:"Open Source Plug & Play Enterprise Message Communication Platform",APPS:"Apps"},calendar:{TODAY_TAG:"Today",YESTERDAY_TAG:"Yesterday",LAST_7_DAYS_TAG:"Last 7 Days",LAST_30_DAYS_TAG:"Last 30 Days",THIS_MONTH_TAG:"This Month",LAST_MONTH_TAG:"Last Month",APPLY_LABEL_TAG:"Apply",CANCEL_LABEL_TAG:"Cancel",FROM_LABEL_TAG:"From",TO_LABEL_TAG:"To",CUSTOM_RANGE_LABEL_TAG:"Custom Range",monthname:{JANUARY_TAG:"January",FEBRUARY_TAG:"February",MARCH_TAG:"March",APRIL_TAG:"April",MAY_TAG:"May",JUNE_TAG:"June",JULY_TAG:"July",AUGUST_TAG:"August",SEPTEMBER_TAG:"September",OCTOBER_TAG:"October",NOVEMBER_TAG:"November",DECEMBER_TAG:"December"}},main:{LEARN_MORE_TAG:"LEARN MORE",PLUG_AND_PLAY_TAG:"PLUG AND PLAY",MULTIPLE_PLATFORMS_TAG:"MULTIPLE PLATFORMS",THE_MESSAGING_SYSTEM_IN_APPLICATIONS:"THE MESSAGING SYSTEM IN APPLICATIONS"},signup:{},createaccount:{ACCOUNT_ALREADY_CREATED:"Account already created.",NO_PASSWORD_TAG:"Password required."},login:{INVALID_EMAIL_TAG:"Invalid email address.",NO_EMAIL_TAG:"email required",NO_PASSWORD_TAG:"password required",NO_SUCH_USER_TAG:"No such user.",PASSWORD_MISMATCH_TAG:"Incorrect password.",NO_AUTHORITY_LOGIN_TAG:"no authority to log in.",LOGIN_TAG:"Log In",LOGIN_EMAIL_PLACEHOLDER_TAG:"Email",LOGIN_PASSWORD_TAG:"Password",LOGIN_FORGET_PASSWORD_TAG:"Forget password?",LOGIN_REGISTER_TAG:"Register"},changepassword:{NO_PASSWORD_TAG:"Please enter your password.",PASSWORD_NOT_MATCH_TAG:"The two entered passwords are different.",CHANGE_PASSWORD_SUCCESS_TAG:"Change password successfully.",CHANGE_PASSWORD_FAIL_TAG:"Change password failed."},settings:{menu:{DATA_ANALYSIS_TAG:"Data analysis",DATA_OVERVIEW_TAG:"Data overview",HISTORY_MSG_TAG:"Message history",TEAM_CONFIG_TAG:"Team settings",BASIC_CONFIG_TAG:"Basic info",USER_INTERFACE_TAG:"User interface",MESSAGE_DISPATCH_TAG:"Message dispatch",SERVICE_USER_TAG:"Service users",SERVICE_GROUP_TAG:"Service users group",APP_INTEGRAGE_TAG:"App integrate",ACCOUT_CONFIG_TAG:"Account settings",ADVANCED_CONFIG_TAG:"Advanced settings",PUSH_CONFIG_TAG:"Push settings"},profile:{UPDATE_SUCCESSFULLY_TAG:"Profile updated successfully.",UPDATE_FAILED_TAG:"Profile updated failed."},account:{OLDPASSWORD_MISMATCH_TAG:"Old password mismatch.",NEWPASSWORD_MISMATCH_TAG:"New password and confirm new password not equal.",REMOVE_USER_PROMOTE_TAG:"Very important.",REMOVE_USER_FAILED_TAG:"Remove user failed.",NO_EMAIL_OR_PASSWORD_TAG:"No email or password provided."},resetpassword:{NO_EMAIL_TAG:"Please enter your email.",EMAIL_NOT_MATCH_TAG:"Invalid email. Please enter the correct email.",SERVICE_ERROR_TAG:"Some error occurred. Please retry in a minute",ERR_NO_USER:"Can not find user with this email"},createapplication:{NO_APPNAME_TAG:"Please enter the name of app.",CREATEAPP_SUCCESSFULLY_TAG:"Create app successfully.",CREATEAPP_FAILED_TAG:"Create app failed",APP_ALREADY_EXITED_TAG:"This name already exited. Please use another name",APP_NAME_LENGTH_LIMIT_TAG:"App name is too long",CONTAIN_UNREGULAR_WORDS_TAG:"Unregular words contained"}},payment:{pay:{CHOOSE_AGENT_SMALLER_THAN_EXIST_AGENT_TAG:"The agents number is smaller than current exist agent numbers,please reduce your team member or expand the agent numbers. Thanks"},payment:{},pwechat:{}},application:{profile:{UPDATE_SUCCESSFULLY_TAG:"Profile updated successfully.",UPDATE_FAILED_TAG:"Profile updated failed.",UPDATE_APP_LACK_PARAMS_TAG:"Update team info needs more params",UPDATE_APP_NOT_EXIST_TAG:"Update team not exist",UPDATE_APP_NAME_OUT_OF_LENGTH_TAG:"Update name out of length",REMOVE_APP_SUCCESS_TAG:"Remove team success",PERMISSSION_DENIED_TAG:"Permission denied, you are not team owner",NO_CHANGE_TAG:"No changes since last change",NOT_REGULAR_WORDS_TAG:"Not allow unregular words",WORDS_OUT_OF_LENGHT_TAG:"The name is too long",COPY_SUCCESSFUL_TAG:"Copy to clipboard success!",COPY_FAIL_TAG:"Copy to clipboard failed!"},account:{OLDPASSWORD_MISMATCH_TAG:"Old password mismatch.",NEWPASSWORD_MISMATCH_TAG:"New password and confirm new password not equal."},resetpassword:{NO_EMAIL_TAG:"Please enter your email.",EMAIL_NOT_MATCH_TAG:"Invalid email. Please enter the correct email.",SERVICE_ERROR_TAG:"Some error occurred. Please retry in a minute",FIND_PASSWORD_TAG:"Find password",LOGIN_EMAIL_TAG:"Email",FIND_TAG:"Send email"},welcome:{UPDATE_APP_SUCCESSFULLY_TAG:"update team info successfully",UPDATE_APP_LACK_PARAMS_TAG:"need more params",UPDATE_APP_NOT_EXIST_TAG:"app not exist",WELCOME_WORDS_OUT_OF_LENGTH_TAG:"welcome words or offline notice out of length",COLOR_PICKED_NOT_RIGHT_TAG:"color picked is unregualr value",UPDATE_ENCOUNTER_AN_ERROR_TAG:"encounter an error,please try again",NO_CHANGED_TAG:"No change",WELCOME_INFO_TAG:"Welcome",SAVE_TAG:"Save",AUTO_POPUP:"Auto Popup",POPUP_ONLY_ONCE:"Only once",POPUP_NEVER:"Never",POPUP_ALWAYS:"Always",COLOR:"Color",TOOLTIP_WELCOME_TAG:"Welcome string when mouse hover on chat launcher icon.",TOOLTIP_COLOR_TAG:"Chat launcher icon colour."},grouping:{WORDS_OUT_OF_LENGTH_TAG:"length out of range",UNREGULAR_WORDS_TAG:"unregular words",NO_ORG_GROUP_TAG:"no group exists",LACK_PARAMS_TAG:"lack params",NOT_LIST_TAG:"not list params",ADD_GROUP_USER_SUCCESS_TAG:"add group user successful",ENCOUNTER_AN_ERROR_TAG:"operation error",REMOVE_GROUP_SUCCESS_TAG:"remove group successful",UPDATE_GROUP_SUCCESS_TAG:"update group successful",CREATE_GROUP_SUCCESS_TAG:"create group successful",MODIFY_INFO_IS_NOT_SUITABLE_TAG:"what you write is not suitable",NO_GROUP_USER_SELECTED_TAG:"no group user selected",GROUP_NAME_EXISTED_TAG:"group name already existed",NO_GROUP_NAME:"group name can't be empty",NO_GROUP_DESC:"group description can't be empty",SERVICE_GROUP_MANAGER_TAG:"Service group manager",MOVE_TO:"Move to ",SELECT_GROUP:"Select group",ALL_SERVICE_USER:"all service users",NEW_GROUP:"Create",SELECT_ALL:"Select all",LOGIN_EMAIL:"Email",ROLE:"Role",GROUP_IN:"Group",GROUP_MODE_CONFIG:"Group config",IS_SHOW_GROUP:"Show",GROUP_NAME:"Group name",DISPATCH_WAY:"Dispatch mode",CREATE_GROUP:"Create Group",GROUP_DESC:"Group Infos",MODIFY_GROUP:"Modify Group",SAVE:"Save",ADMIN_USER_TAG:"Team admin",SERVICE_USER_TAG:"Service user",UNAMED_GROUP_NAME_TAG:"Not grouped",DISTRIBUTOR_TAG:"Primary Group"},people:{SEND_INVITATION_EMAIL_SUCCESSFULLY_TAG:"Send the invitation email successfully.",SEND_INVITATION_EMAIL_FAILED_TAG:"Send the invitation email failed.",CREATE_APP_USER_SUCCESSFULLY_TAG:"Add user successfully.",CREATE_APP_USER_FAILED_TAG:"Add user failed.",USER_EXIST_AND_INVITE_TAG:"user existed,please invite directly",REMOVE_APP_USER_SUCCESSFULLY_TAG:"Remove successfully.",REMOVE_APP_USER_FAILED_TAG:"Remove failed.",ALREADY_IS_APP_USER_TAG:"This user has already been app user.",QUOTA_REACH_TO_UPPER_LIMIT_TAG:"Agent quote reach to upper limit.",PARAMS_MISS_TAG:"Params miss",PERMISSION_DENY_TAG:"You are not allow to create team member",CREATE_SERVICE_USER_TAG:"Create service user",SEARCH_TAG:"Search",SELECT_ALL_TAG:"Select all",EDIT_SERVICE_USER_TAG:"Edit",REMOVE_SERVICE_USER_TAG:"Remove",REMOVE_SERVICE_USER_PROMOTE_TAG:"Are you sure to remove the service user: ",OWNER_TAG:"Owner",SERVICE_USER_TAG:"Service user",CANCEL_TAG:"Cancel",OK_TAG:"Ok",SERVICE_USER_NAME_TAG:"Service user full name",SERVICE_USER_EMAIL_TAG:"Email",PASSWORD_TAG:"Password",CONFIRM_PASSWORD_TAG:"Confirm password",CREATE_TAG:"Create",SAVE_TAG:"Save",EDIT_APP_USER_SUCCESSFULLAY_TAG:"Edit user successfully.",EDIT_APP_USER_FAILED_TAG:"Edit user failed."},manualinstall:{COPY_SUCCESSFUL_TAG:"Copy to clipboard success!"},integrate:{COPY_TO_CLIPBOARD:"Copy to clipboard",PREVIEW:"Preview",URL_LINK:"Url",DEMO_DEPLOY_TO:"PPMessage has deploy to this website for preview",COPY_CODE_TO_BODY:"Copy the code below, and paste it into html body."},teamprofile:{TEAM_INFO:"Team info",TEAM_NAME:"Team name",SAVE:"Save"}},statistics:{overview:{OVERVIEW_TAG:"Overview",TODAY_CUSTOMER_TAG:"Today customer",YESTERDAY_CUSTOMER_TAG:"Yesterday customer",ALL_CUSTOMER_TAG:"All customer",ALL_MESSAGE_TAG:"All message",REALTIME_DATA_TAG:"Today data",REALTIME_CUSTOMER_TAG:"Customer",REALTIME_SERVICE_TAG:"Service",REALTIME_MESSAGE_TAG:"Message",HISTORY_DATA_TAG:"History data",HISTORY_CUSTOMER_TAG:"Customer",HISTORY_SERVICE_TAG:"Service",HISTORY_MESSAGE_TAG:"Message",MAX_RANGE_TAG:"Less than 30 days"},historymessages:{MESSAGE_FILE_TYPE_TAG:"File",MESSAGE_IMAGE_TYPE_TAG:"Image",MESSAGE_TXT_TYPE_TAG:"Large text",MESSAGE_GET_ERROR_TAG:"Get history message error.",SEARCH_TAG:"Search",MESSAGE_LIST_TAG:"Messages",EMPTY_LIST_TAG:"Empty",MESSAGES:"Messages",MESSAGES_PREVIEW:"Messages preview"},messageroute:{ALL:"ALL",SMART:"SMART",GROUP:"GROUP",ROBOT:"ROBOT"},userprofile:{EMAIL_TAG:"Email",USER_NAME_TAG:"Username",SAVE_TAG:"Save"},advanced_settings:{CHANGE_PASSWORD_TAG:"Change Password",CURRENT_PASSWORD_TAG:"Current password",NEW_PASSWORD_TAG:"New password",REPEAT_NEW_PASSWORD_TAG:"New password repeat",SAVE_TAG:"Save",FORGET_PASSWORD_TAG:"Forget password"}}},cn:{COPYRIGHT_PPMESSAGE:"皮皮消息.",global:{DELETE_TEAM_TAG:"删除团队",DELETE_TEAM_NOTE_TAG:"删除团队是不可逆操作，该操作意味着将永久从本网站删除与该团队有关的所有数据.如有疑问请点击右下角图标咨询客服.",DELETE_TEAM_CONFIRM_TAG:"确认删除",DELETE_TEAM_CANCEL_TAG:"取消删除",DELETE_TEAM_NOTE_DATA_TAG:"删除，意味着您将失去所有与该团队有关的数据.",DELETE_TEAM_NOTE_MEAN_TAG:"请确保您充分了解该操作的意义?",PARAMS_MISS_TAG:"参数缺失",FULLNAME_ERROR_TAG:"姓名缺失或长度超过限制",NO_FIRSTNAME_TAG:"请输入您的名字",NO_LASTNAME_TAG:"请输入您的姓",NO_FULLNAME_TAG:"姓名缺失",NO_EMAIL_TAG:"邮箱缺失或者格式不正确",NO_PASSWORD_TAG:"密码缺失或者格式不正确",NO_RPASSWORD_TAG:"请再次输入密码",NO_AGREE_TAG:"请同意我们的协议",PASSWORD_NOT_MATCHED_TAG:"两次密码不匹配",EMAIL_USED_TAG:"该邮箱已被占用",SIGNUP_ERROR_TAG:"注册遇到错误",SIGNUP_SUCCESS_TAG:"注册成功",SERVICE_ERROR_TAG:"注册服务错误",FULLNAME_UNREGULAR_TAG:"用户全名不要使用非常规字符",PASSWORD_UNREGULAR_TAG:"用户密码不要使用非常规字符",FIRST_NAME_TOO_LONG_TAG:"名--长度超过限制",LAST_NAME_TOO_LONG_TAG:"姓--长度超过限制",EMAIL_TOO_LONG_TAG:"邮件--长度超过限制",COMPANY_NAME_TOO_LONG_TAG:"公司名字--长度超过限制",EMAIL_UNREACHABLE_TAG:"无法发送邮件，邮箱不可达",EMAIL_LOGIN_ERROR_TAG:"系统繁忙，无法登录邮箱发送邮件，请重新发送或者联系我们",EMAIL_SENDING_ERROR_TAG:"邮件发送失败，请重新发送或者联系我们",LENGTH_OUT_OF_RANGE_TAG:"长度超过限制",ERR_PASSWORD_CONTAINS_WHITESPACE_AT_HEAD_OR_TAIL:"密码开头或结尾不允许包含空格",SIGNUP_TAG:"创建新用户",SIGNIN_TAG:"用户登录",RESET_PASSWORD_TAG:"重设用户密码",CREATE_TEAM_TAG:"创建客服团队",START_TAG:"开始使用",FULLNAME_TAG:"真实姓名",LOGIN_NAME_TAG:"登录邮箱",LOGIN_PASSWORD_TAG:"密码",LOGIN_PASSWORD_REPEAT_TAG:"确认密码",SERVICE_TEAM_TAG:"服务条款",AGREE_SERVICE_TEAM_TAG:"注册并登录意味着同意本网站",MAKE_NAME_FOR_YOURTEAM:"为您的团队起一个响亮的名字吧!",TEAM_NAME:"客服团队名称",CONGRATULATIONS:"恭喜您，客服团队创建成功!",YOU_WILL_EXPERIENCE:"您将体验",ANY_TRAFFIC:"不限流量",ANY_MESSAGE:"不限消息",YOU_CAN:"开始使用，您可以：",DEPLOY_CODE:"代码部署",ADD_SERVICE_USER:"添加客服",MODIFY_SETTINGS:"修改信息",USER_ACCOUNT_TAG:"用户账户",SIGNIN_FAILED_TAG:"登录失败",SEND_NEW_PASSWORD_TAG:"邮寄新的密码",SEND_NEW_PASSWORD_SUCCESS_TAG:"成功邮寄新的密码",SEND_NEW_PASSWORD_FAILED_TAG:"邮寄新的密码失败",SUBMIT_TAG:"提交"},app:{MY_PROFILE_TAG:"我的信息",LOGOUT_TAG:"登出",LOGIN_TAG:"登入",DOWNLOAD:"下载",CONTACT_US:"联系我们",START_SERVICE_TAG:"开始服务",PRIVATE_CONFIG_TAG:"个人设置",TEAM_CONFIG_TAG:"团队设置",EXIT_APP_TAG:"退出",SIGNUP_TAG:"注册",LOGIN_TAG:"登录",SLOGAN:"开源企业消息通讯平台",APPS:"所有团队"},calendar:{TODAY_TAG:"今天",YESTERDAY_TAG:"昨天",LAST_7_DAYS_TAG:"最近7天",LAST_30_DAYS_TAG:"最近30天",THIS_MONTH_TAG:"本月",LAST_MONTH_TAG:"上一个月",APPLY_LABEL_TAG:"应用",CANCEL_LABEL_TAG:"取消",FROM_LABEL_TAG:"从",TO_LABEL_TAG:"到",CUSTOM_RANGE_LABEL_TAG:"定制范围",monthname:{JANUARY_TAG:"一月",FEBRUARY_TAG:"二月",MARCH_TAG:"三月",APRIL_TAG:"四月",MAY_TAG:"五月",JUNE_TAG:"六月",JULY_TAG:"七月",AUGUST_TAG:"八月",SEPTEMBER_TAG:"九月",OCTOBER_TAG:"十月",NOVEMBER_TAG:"十一月",DECEMBER_TAG:"十二月"}},main:{LEARN_MORE_TAG:"了解更多",PLUG_AND_PLAY_TAG:"即插即用",MULTIPLE_PLATFORMS_TAG:"多平台",THE_MESSAGING_SYSTEM_IN_APPLICATIONS:"应用内消息系统"},signup:{},createaccount:{ACCOUNT_ALREADY_CREATED:"账户已经被创建了。",NO_PASSWORD_TAG:"需要填写密码。"},login:{INVALID_EMAIL_TAG:"无效的EMAIL地址",NO_EMAIL_TAG:"需要填写EMAIL地址。",NO_PASSWORD_TAG:"需要填写密码。",NO_SUCH_USER_TAG:"无此用户。",PASSWORD_MISMATCH_TAG:"密码错误。",LOGIN_TAG:"登录",LOGIN_EMAIL_PLACEHOLDER_TAG:"登录邮箱",LOGIN_PASSWORD_TAG:"密码",LOGIN_FORGET_PASSWORD_TAG:"忘记密码?",LOGIN_REGISTER_TAG:"注册"},changepassword:{NO_PASSWORD_TAG:"请输入你的密码。",PASSWORD_NOT_MATCH_TAG:"两次输入的密码不同。",CHANGE_PASSWORD_SUCCESS_TAG:"修改密码成功。",CHANGE_PASSWORD_FAIL_TAG:"修改密码失败。"},settings:{menu:{DATA_ANALYSIS_TAG:"数据分析",DATA_OVERVIEW_TAG:"数据总览",HISTORY_MSG_TAG:"历史消息",TEAM_CONFIG_TAG:"团队设置",BASIC_CONFIG_TAG:"基本信息",USER_INTERFACE_TAG:"用户界面",MESSAGE_DISPATCH_TAG:"消息分流",SERVICE_USER_TAG:"客服人员",SERVICE_GROUP_TAG:"客服分组",APP_INTEGRAGE_TAG:"应用集成",ACCOUT_CONFIG_TAG:"账户设置",ADVANCED_CONFIG_TAG:"高级设置"},profile:{UPDATE_SUCCESSFULLY_TAG:"更新成功。",UPDATE_FAILED_TAG:"更新失败。"},account:{OLDPASSWORD_MISMATCH_TAG:"原密码输入错误",NEWPASSWORD_MISMATCH_TAG:"新密码两次输入不同",REMOVE_USER_PROMOTE_TAG:"重要的说明看三遍",REMOVE_USER_FAILED_TAG:"注销用户失败",NO_EMAIL_OR_PASSWORD_TAG:"没提供邮件或者密码"},resetpassword:{NO_EMAIL_TAG:"请输入您的邮箱",EMAIL_NOT_MATCH_TAG:"邮箱和此账号不匹配，请输入正确的邮箱",SERVICE_ERROR_TAG:"发生了一些错误，请稍后重试",ERR_NO_USER:"此用户不存在"},createapplication:{NO_APPNAME_TAG:"请输入团队的名称。",CREATEAPP_SUCCESSFULLY_TAG:"创建团队成功。",CREATEAPP_FAILED_TAG:"创建团队失败。",APP_ALREADY_EXITED_TAG:"这个名字已经使用，请换一个名字。",APP_NAME_LENGTH_LIMIT_TAG:"团队名字超过长度",CONTAIN_UNREGULAR_WORDS_TAG:"团队名称包含非常规字符"}},payment:{pay:{CHOOSE_AGENT_SMALLER_THAN_EXIST_AGENT_TAG:"您当前所选坐席数小于团队实际坐席数，请扩大坐席数或删除一些坐席再来选购，谢谢"},payment:{},pwechat:{}},application:{profile:{UPDATE_SUCCESSFULLY_TAG:"更新成功。",UPDATE_FAILED_TAG:"更新失败。",UPDATE_APP_LACK_PARAMS_TAG:"修改缺乏参数",UPDATE_APP_NOT_EXIST_TAG:"修改的团队不存在",UPDATE_APP_NAME_OUT_OF_LENGTH_TAG:"修改的团队名超出长度",REMOVE_APP_SUCCESS_TAG:"删除团队成功",PERMISSSION_DENIED_TAG:"操作没有权限",NO_CHANGE_TAG:"没有做出任何修改",NOT_REGULAR_WORDS_TAG:"请不要使用非常规字符",WORDS_OUT_OF_LENGHT_TAG:"团队名称超过限制",COPY_SUCCESSFUL_TAG:"成功复制到剪贴板",COPY_FAIL_TAG:"复制失败，请手动复制!"},account:{OLDPASSWORD_MISMATCH_TAG:"原密码输入错误",NEWPASSWORD_MISMATCH_TAG:"新密码两次输入不同"},resetpassword:{NO_EMAIL_TAG:"请输入您的邮箱",EMAIL_NOT_MATCH_TAG:"邮箱和此账号不匹配，请输入正确的邮箱",SERVICE_ERROR_TAG:"发生了一些错误，请稍后重试",FIND_PASSWORD_TAG:"找回密码",LOGIN_EMAIL_TAG:"登录邮箱",FIND_TAG:"发送找回密码邮件"},welcome:{UPDATE_APP_SUCCESSFULLY_TAG:"更新成功",UPDATE_APP_LACK_PARAMS_TAG:"参数缺失",UPDATE_APP_NOT_EXIST_TAG:"应用不存在",WELCOME_WORDS_OUT_OF_LENGTH_TAG:"问候语长度超过限制",COLOR_PICKED_NOT_RIGHT_TAG:"颜色取值有问题",UPDATE_ENCOUNTER_AN_ERROR_TAG:"更新遇到一个错误，请重试或者联系客服，谢谢",NO_CHANGED_TAG:"没有任何改变",WELCOME_INFO_TAG:"欢迎信息",SAVE_TAG:"保存",AUTO_POPUP:"自动弹出",POPUP_ONLY_ONCE:"仅首次",POPUP_NEVER:"从不弹出",POPUP_ALWAYS:"总是弹出",COLOR:"图标颜色",TOOLTIP_WELCOME_TAG:"鼠标悬停在聊天图标上的时候，显示的欢迎信息",TOOLTIP_COLOR_TAG:"聊天图标的背景颜色"},grouping:{WORDS_OUT_OF_LENGTH_TAG:"超过最大长度限制",UNREGULAR_WORDS_TAG:"请不要使用非常规字符",NO_ORG_GROUP_TAG:"没有找到组的信息",LACK_PARAMS_TAG:"缺少必要的信息",NOT_LIST_TAG:"参数格式不对",ADD_GROUP_USER_SUCCESS_TAG:"添加组用户成功",ENCOUNTER_AN_ERROR_TAG:"操作遇到错误，请查看控制台",REMOVE_GROUP_SUCCESS_TAG:"成功移除小组",UPDATE_GROUP_SUCCESS_TAG:"成功更新小组信息",CREATE_GROUP_SUCCESS_TAG:"成功创建小组",MODIFY_INFO_IS_NOT_SUITABLE_TAG:"所填参数不合适",NO_GROUP_USER_SELECTED_TAG:"没有选择任何客服人员",GROUP_NAME_EXISTED_TAG:"组名已经存在",NO_GROUP_NAME:"请填写组名",NO_GROUP_DESC:"请填写组的描述信息",SERVICE_GROUP_MANAGER_TAG:"客服分组管理",MOVE_TO:"移动到",SELECT_GROUP:"选择小组",ALL_SERVICE_USER:"全部客服",NEW_GROUP:"新建分组",SELECT_ALL:"全选",LOGIN_EMAIL:"登录邮箱",ROLE:"角色",GROUP_IN:"分组",GROUP_MODE_CONFIG:"分组模式配置",IS_SHOW_GROUP:"是否显示",GROUP_NAME:"组名",DISPATCH_WAY:"分流方式",CREATE_GROUP:"创建分组",GROUP_DESC:"描述",MODIFY_GROUP:"修改分组",SAVE:"确认修改",ADMIN_USER_TAG:"团队管理员",SERVICE_USER_TAG:"客服人员",UNAMED_GROUP_NAME_TAG:"未分组",DISTRIBUTOR_TAG:"首选组"},people:{SEND_INVITATION_EMAIL_SUCCESSFULLY_TAG:"发送邀请邮件成功。",SEND_INVITATION_EMAIL_FAILED_TAG:"发送邀请邮件失败。",CREATE_APP_USER_SUCCESSFULLY_TAG:"添加成功。",CREATE_APP_USER_FAILED_TAG:"添加失败。",USER_EXIST_AND_INVITE_TAG:"用户已经存在，请点击‘邀请客服人员’按钮添加",REMOVE_APP_USER_SUCCESSFULLY_TAG:"删除成功。",REMOVE_APP_USER_FAILED_TAG:"删除失败。",ALREADY_IS_APP_USER_TAG:"这个用户已经添加，不需要重复添加。",QUOTA_REACH_TO_UPPER_LIMIT_TAG:"坐席配额达到上限,请先扩容",PARAMS_MISS_TAG:"参数不足",PERMISSION_DENY_TAG:"只有团队owner才能创建成员",CREATE_SERVICE_USER_TAG:"创建客服人员",SEARCH_TAG:"搜索",SELECT_ALL_TAG:"选择全部",REMOVE_SERVICE_USER_TAG:"编辑客服",REMOVE_SERVICE_USER_TAG:"移除客服",REMOVE_SERVICE_USER_PROMOTE_TAG:"该操作会移除您选定的客服人员：",OWNER_TAG:"创建者",SERVICE_USER_TAG:"客服",CANCEL_TAG:"取消",OK_TAG:"确定",SERVICE_USER_NAME_TAG:"客服全名",SERVICE_USER_EMAIL_TAG:"客服邮箱",PASSWORD_TAG:"设置密码",
CONFIRM_PASSWORD_TAG:"确认密码",CREATE_TAG:"创建",SAVE_TAG:"保存",EDIT_APP_USER_SUCCESSFULLAY_TAG:"更新用户信息成功",EDIT_APP_USER_FAILED_TAG:"更新用户信息失败"},manualinstall:{COPY_SUCCESSFUL_TAG:"成功复制到剪贴板."},integrate:{COPY_TO_CLIPBOARD:"复制到剪贴板",PREVIEW:"马上看看",URL_LINK:"生成链接",DEMO_DEPLOY_TO:"PPMessage已经部署在下面的网页链接上",COPY_CODE_TO_BODY:"复制下面的代码并置于 HTML 文件的 <body> </body> 元素之间"},teamprofile:{TEAM_INFO:"团队信息",TEAM_NAME:"团队名称",SAVE:"确认修改"}},statistics:{overview:{OVERVIEW_TAG:"数据总览",TODAY_CUSTOMER_TAG:"今日访客",YESTERDAY_CUSTOMER_TAG:"昨日访客",ALL_CUSTOMER_TAG:"累计访客",ALL_MESSAGE_TAG:"累计消息",REALTIME_DATA_TAG:"实时统计",REALTIME_CUSTOMER_TAG:"访客",REALTIME_SERVICE_TAG:"客服",REALTIME_MESSAGE_TAG:"消息",HISTORY_DATA_TAG:"历史统计",HISTORY_CUSTOMER_TAG:"访客",HISTORY_SERVICE_TAG:"客服",HISTORY_MESSAGE_TAG:"消息",MAX_RANGE_TAG:"最多30天"},historymessages:{MESSAGE_FILE_TYPE_TAG:"文件",MESSAGE_IMAGE_TYPE_TAG:"图片",MESSAGE_TXT_TYPE_TAG:"文本消息",MESSAGE_GET_ERROR_TAG:"获取历史信息错误",SEARCH_TAG:"搜索",MESSAGE_LIST_TAG:"消息列表",EMPTY_LIST_TAG:"没有任何匹配的会话",MESSAGES:"条消息",MESSAGES_PREVIEW:"消息预览"},messageroute:{ALL:"群发模式",SMART:"智能匹配",GROUP:"分组模式",ROBOT:"人工智能"},userprofile:{EMAIL_TAG:"邮箱",USER_NAME_TAG:"姓名",SAVE_TAG:"确认修改"},advanced_settings:{CHANGE_PASSWORD_TAG:"修改密码",CURRENT_PASSWORD_TAG:"现有密码",NEW_PASSWORD_TAG:"新密码",REPEAT_NEW_PASSWORD_TAG:"确认新密码",SAVE_TAG:"确认修改",FORGET_PASSWORD_TAG:"忘记密码"}}}}).config(["$translateProvider","yvTransTags",function(e,t){e.translations("en",t.en),e.translations("zh-CN",t.cn),e.registerAvailableLanguageKeys(["en","zh-CN"],{en:"en","en-US":"en","en-UK":"en","zh-CN":"zh-CN"}),e.determinePreferredLanguage(function(){return window.navigator.userLanguage||window.navigator.language}),e.fallbackLanguage("en","zh-CN")}]),angular.module("this_app.route",["ui.router","this_app.constants"]).config(["$stateProvider","$urlRouterProvider","yvConstants","blockUIConfig",function(e,t,n,r){r.autoInjectBodyBlock=!1,e.state("forget",{url:"/forget",templateUrl:n.TEMPLATE_PREFIX+"forget.html",controller:"ForgetCtrl"}).state("app",{"abstract":!0,url:"/app",templateUrl:n.TEMPLATE_PREFIX+"app.html",controller:"AppCtrl"}).state("app.signin",{url:"/signin",templateUrl:n.TEMPLATE_PREFIX+"signin.html",controller:"SignInCtrl"}).state("app.error",{url:"/error",templateUrl:n.TEMPLATE_PREFIX+"404.html",controller:"ErrorCtrl"}).state("app.createaccount",{url:"/createaccount/:account",templateUrl:n.TEMPLATE_PREFIX+"createaccount.html",controller:"CreateAccountCtrl"}).state("app.recoverpassword",{url:"/recoverpassword/:account",templateUrl:n.TEMPLATE_PREFIX+"recoverpassword.html",controller:"RecoverPasswordCtrl"}).state("app.resetpassword",{url:"/resetpassword/:email",templateUrl:n.TEMPLATE_PREFIX+"settings/resetpassword.html",controller:"SettingsResetpasswordCtrl"}).state("app.confirmreset",{url:"/confirmreset",templateUrl:n.TEMPLATE_PREFIX+"settings/confirmreset.html",controller:"SettingsConfirmresetCtrl"}).state("app.settings.teamprofile",{url:"/teamprofile",templateUrl:n.TEMPLATE_PREFIX+"settings/teamprofile.html",controller:"ApplicationProfileCtrl"}).state("app.settings.configuration",{url:"/configuration",templateUrl:n.TEMPLATE_PREFIX+"settings/welcome.html",controller:"ApplicationWelcomeCtrl"}).state("app.settings.teamgrouping",{url:"/teamgrouping",templateUrl:n.TEMPLATE_PREFIX+"settings/grouping.html",controller:"GroupingCtrl"}).state("app.glance",{url:"/glance",templateUrl:n.TEMPLATE_PREFIX+"settings/glance.html",controller:"GlanceCtrl"}).state("app.settings.teampeople",{url:"/teampeople",templateUrl:n.TEMPLATE_PREFIX+"settings/people.html",controller:"ApplicationPeopleCtrl"}).state("app.settings.messageroute",{url:"/messageroute",templateUrl:n.TEMPLATE_PREFIX+"settings/messageroute.html",controller:"ApplicationMessageRouteCtrl"}).state("app.settings.overview",{url:"/overview",templateUrl:n.TEMPLATE_PREFIX+"settings/overview.html",controller:"StatisticsOverviewCtrl"}).state("app.settings.historymessage",{url:"/historymessage",templateUrl:n.TEMPLATE_PREFIX+"settings/historymessage.html",controller:"StatisticsHistoryMessageCtrl"}).state("app.settings.integrate",{url:"/integrate",templateUrl:n.TEMPLATE_PREFIX+"settings/integrate.html",controller:"IntegrateCtrl"}).state("app.settings",{"abstract":!0,url:"/settings",templateUrl:n.TEMPLATE_PREFIX+"settings/settings.html",controller:"SettingsCtrl"}).state("app.settings.profile",{url:"/profile",templateUrl:n.TEMPLATE_PREFIX+"settings/userprofile.html",controller:"SettingsProfileCtrl"}).state("app.settings.account",{url:"/account",templateUrl:n.TEMPLATE_PREFIX+"settings/account.html",controller:"SettingsAccountCtrl"}).state("app.settings.push",{url:"/push",templateUrl:n.TEMPLATE_PREFIX+"settings/push.html",controller:"SettingsPushCtrl"}),t.otherwise("/app/signin")}]),angular.module("this_app.services",[]),angular.module("this_app",["base64","ngCookies","toastr","blockUI","angularUtils.directives.dirPagination","angularFileUpload","ui.router","ngMaterial","ngFileUpload","this_app.constants","this_app.i18n","this_app.route","this_app.services"]).run(["$rootScope","$location","$timeout",function(e,t,n){window.PP&&PP.boot({app_uuid:"a600998e-efff-11e5-9d9f-02287b8c0ebf"},function(e,t){console.log("PPCOM boot: ",t)})}]),$yvAjaxService.$inject=["$state","$timeout","$http","$cookies","yvUser","yvConstants","yvUtil","yvLog","yvDebug"],angular.module("this_app.services").factory("yvAjax",$yvAjaxService),$yvUserService.$inject=[],angular.module("this_app.services").factory("yvUser",$yvUserService),$yvMime.$inject=[],angular.module("this_app").factory("yvMime",$yvMime),$yvUtilService.$inject=["$rootScope","$translate","$http","$base64","yvConstants","yvLog"],angular.module("this_app.services").factory("yvUtil",$yvUtilService),angular.module("this_app").factory("yvType",["yvConstants",function(e){function t(e){return e.message_subtype?e.message_subtype:e.ms?e.ms:null}return{is_logout:function(n){var r=t(n);return r===e.MESSAGE_SUBTYPE.LOGOUT},is_document:function(n){var r=t(n);return r===e.MESSAGE_SUBTYPE.DOCUMENT},is_file:function(n){var r=t(n);return r===e.MESSAGE_SUBTYPE.DOCUMENT?!0:r===e.MESSAGE_SUBTYPE.FILE},is_video:function(n){var r=t(n);return r===e.MESSAGE_SUBTYPE.VIDEO},is_single_card:function(n){var r=t(n);return r===e.MESSAGE_SUBTYPE.SINGLE_CARD},is_multiple_card:function(n){var r=t(n);return r===e.MESSAGE_SUBTYPE.MULTIPLE_CARD},is_text:function(n){var r=t(n);return r===e.MESSAGE_SUBTYPE.TEXT},is_txt:function(n){var r=t(n);return r===e.MESSAGE_SUBTYPE.TXT},is_image:function(n){var r=t(n);return r===e.MESSAGE_SUBTYPE.IMAGE},is_gps_location:function(n){var r=t(n);return r===e.MESSAGE_SUBTYPE.GPS_LOCATION},is_audio:function(n){var r=t(n);return r===e.MESSAGE_SUBTYPE.AUDIO},is_left:function(t){return t.message_direction===e.MESSAGE_DIR.DIR_IN},is_right:function(t){return t.message_direction===e.MESSAGE_DIR.DIR_OUT},is_left_audio:function(e){return!(!this.is_left(e)||!this.is_audio(e))},is_right_audio:function(e){return!(!this.is_right(e)||!this.is_audio(e))}}}]),$yvLog.$inject=[],angular.module("this_app.services").factory("yvLog",$yvLog),function(){function e(e){function t(e,t){return void 0!==window&&n&&void 0!==e&&(window[e]=t),r}var n=!0,r={attach:t,h:e.h,d:e.d,w:e.w};return r}e.$inject=["yvLog"],angular.module("this_app.services").factory("yvDebug",e)}(),function(){function e(e,t,n,r,_,o,a,s,i,u){function c(e,t){if(t&&t.$scope&&t.onRefresh){var r=t.$scope,o=r.$on(_.BROADCAST_EVENT_KEY.REFRESH_PAGE,function(){O(function(e){e===P.OK&&(n.d("===event:refreshpage==="),t.onRefresh())})});r.$on("$destroy",function(){n.d("===destroy==="),o&&o()})}f(function(){O(function(t){t===P.OK&&S(),e&&e(t)},t&&t.expectedStatus)})}function l(e){o.update(e),n.d("===logined user===",e)}function p(t){e.set_login_data(t),v=t,n.d("===active user===",t)}function A(e){u.put(_.COOKIE_KEY.ACTIVE_USER_UUID,e)}function E(e,t){u.put(_.COOKIE_KEY.ACCESS_TOKEN,t),u.put(_.COOKIE_KEY.LOGINED_USER_UUID,e)}function T(){return o.get()}function d(){return o.isLogined()}function g(e){if(o.setLogined(e),e){var t={isAdmin:o.isAdminUser()};a.$emit(_.BROADCAST_EVENT_KEY.LOGIN_FINISHED,t),n.d("===event:login finished===")}}function m(){o.logout(),v=null,e.logout(),u.remove(_.COOKIE_KEY.LOGINED_USER_UUID),u.remove(_.COOKIE_KEY.ACTIVE_USER_UUID),u.remove(_.COOKIE_KEY.ACCESS_TOKEN)}function f(e,t,n){return v?void(e&&e(v)):void R(_.COOKIE_KEY.ACTIVE_USER_UUID,function(t){p(t),O(e)},t,n)}function S(e,t,n){G(e,t,n)}function G(e,t,n){return o.get()?void(e&&e(o.get())):void R(_.COOKIE_KEY.LOGINED_USER_UUID,function(t){l(t),g(!0),e&&e(t)},function(){g(!1),t&&t()},n)}function R(e,n,r,_){var o=u.get(e);if(!o)return r?void r():void(_&&i(function(){s.go(_)}));o=o.replace(/\"/g,"");var a=t.get_user_detail_with_password(o);a.success(function(e){0==e.error_code?i(function(){n&&n(e)}):r&&r()}),a.error(function(e){r&&r()})}function O(n,r){function _(e){n&&n(e)}var o=U.OWNER_2|U.ADMIN|U.OWNER_1;null!==r&&void 0!==r&&NaN!==r&&(o=r);var a=U[e.get_status()];if(void 0===a||a&1!==o)return void _(P.STATUS_ILLEGAL);if(e.get_team())_(P.OK);else{var s=t.get_app_owned_by_user(e.get_uuid());s.success(function(t){e.set_team(t.app),_(P.OK)})}}var v,P={OK:0,STATUS_ILLEGAL:1,LOGIN_ERROR:2},U={OWNER_0:1,OWNER_1:2,OWNER_2:4,ADMIN:8};return{ERROR_CODE:P,STATUS:U,prepare:c,updateLoginedUser:l,updateActiveUser:p,check_logined:G,checkActiveUser:f,checkLoginedUser:S,getLoginedUser:T,isLogined:d,setLogined:g,logout:m,updateActiveUserCookieKey:A,updateLoginedUserCookieKey:E}}e.$inject=["yvUser","yvAjax","yvDebug","yvAppService","yvConstants","yvLoginedUser","$rootScope","$state","$timeout","$cookies"],angular.module("this_app.services").factory("yvLogin",e)}(),function(){function t(t,n,r,_,o,a,s){function i(){return M}function u(e,t,n){function o(e){t&&t()}function a(e){n&&n()}r.create_org_group({app_uuid:_.get_team().uuid,group_name:e.new_group_name,group_desc:e.new_group_desc,is_distributor:e.new_group_is_distributor}).success(function(e){m(e)?o(e):a(e)}).error(a)}function c(t,n,o){function a(t,n,o){function a(e){n&&n(e)}function s(e){o&&o(e)}r.remove_group({app_uuid:_.get_team().uuid,group_uuid:t}).success(function(t){m(t)?a(t):s(e)}).error(s)}function s(e){n&&n(e)}function i(e){o&&o(e)}var u=function(e){var t=[];return angular.forEach(e,function(e,n){t.push(e.uuid)}),t}(M[t].user_list||[]);r.remove_group_user({app_uuid:_.get_team().uuid,group_uuid:t,user_list:u}).success(function(e){m(e)?a(t,s,i):i(e)}).error(i)}function l(e,t,n){function r(n){O(e.old_group_uuid,e.user_list),a.success(n,t)}e.group_uuid===C.uuid?A({group_uuid:e.old_group_uuid,user_list:e.user_list},r,n):p(e,r,n)}function p(e,t,n){r.add_group_user({app_uuid:_.get_team().uuid,group_uuid:e.group_uuid,user_list:e.user_list}).success(function(e){a.response(e,t,n)}).error(function(e){a.error(e,n)})}function A(e,t,n){r.remove_group_user({app_uuid:_.get_team().uuid,group_uuid:e.group_uuid,user_list:e.user_list}).success(function(e){a.response(e,t,n)}).error(function(e){a.error(e,n)})}function E(e,t,n){r.update_group(e).success(function(e){a.response(e,t,n)}).error(function(e){a.error(e,n)})}function T(e,t){function n(t){var n=t.list.sort(f)||[];angular.forEach(n,function(e,t){M[e.uuid]=e}),d(function(t){e&&e(M)},function(e){o(e)})}function o(e){t&&t({})}M={},r.get_group_list({app_uuid:_.get_team().uuid}).success(function(e){m(e)?n(e):o(e)}).error(o)}function d(e,t){s.getAppServiceUsers(function(t){S(t),R(t),a.success(t,e)},t)}function g(e,t,n,o){function a(){d(function(e){var n=[];angular.forEach(e,function(e,t){e.group_uuid===C.uuid&&n.push(e)}),t&&t(n)},function(e){n&&n([])})}function s(){r.get_group_user_list({app_uuid:_.get_team().uuid,group_uuid:e}).success(function(e){m(e)?t&&t(S(e.list)):n&&n([])}).error(function(e){n&&n([])})}var i=angular.extend({reuse:!1},o);return void 0!==M[e]&&void 0!==M[e].user_list&&i.reuse?void(t&&t(M[e].user_list)):void(e===C.uuid?a():s())}function m(e){return e&&0===e.error_code}function f(e,t){return e.updatetime<t.updatetime?-1:1}function S(e){return angular.forEach(e,function(e,t){o.isNull(e.group)?(e.group_uuid=C.uuid,e.user_group_name=C.group_name):(e.group_uuid=e.group.uuid,e.user_group_name=e.group.group_name)}),e}function G(e,t){var n=!1;return $.each(e,function(e,r){n||t.uuid!==r.uuid||(n=!0)}),n}function R(e){angular.forEach(e,function(e,t){e.group_uuid===C.uuid&&void 0===M[C.uuid]&&(M[C.uuid]=C),void 0===M[e.group_uuid].user_list&&(M[e.group_uuid].user_list=[]),G(M[e.group_uuid].user_list,e)||M[e.group_uuid].user_list.push(e)})}function O(e,t){var n=M[e].user_list||[];angular.forEach(n,function(e,r){var _=-1;-1!==(_=L.find(e.uuid,t))&&n.splice(_,1)})}function v(e,t){var n=y.OK;return n=U(e,t)?y.EXIST:N(t)}function P(e){return N(e)}function U(e,t){var n=!1;return angular.forEach(M,function(r,_){n===!1&&r.group_name===t&&(!o.isNull(e)&&e!==r.uuid||o.isNull(e))&&(n=!0)}),n}function N(e){var t=y.OK;return o.isNull(e)||e.length<=0?t=y.EMPTY:o.regexp_check(e)?e.length>D&&(t=y.TOO_LONG):t=y.ILLEGAL_NAME,t}function I(){C.group_name=t("translate")("application.grouping.UNAMED_GROUP_NAME_TAG")}var h=t("translate")("application.grouping.UNAMED_GROUP_NAME_TAG"),C={uuid:"group_uuid_no_group",group_name:h},L=$,M={},y={OK:0,EXIST:1,EMPTY:2,ILLEGAL_NAME:3,TOO_LONG:4},D=64;return{UNGROUPED_GROUP_INFO:C,ERROR:y,setUngroupedName:I,all:i,createGroup:u,removeGroup:c,switchGroup:l,updateGroup:E,getGroupList:T,getTeamServiceUserList:d,getGroupServiceUserList:g,checkGroupNameValid:v,checkGroupDescValid:P}}t.$inject=["$filter","yvLog","yvAjax","yvUser","yvUtil","yvCallbackService","yvAppPeopleService"],angular.module("this_app.services").factory("yvAppGroupingService",t)}(),function(){function e(e,t,n,r){function _(r,_){function o(e){var n=e.list||[];angular.forEach(n,function(e,n){e.is_owner_user=e.user_email===t.get_email()}),r&&r(n)}function a(e){_&&_([])}e.get_team_service_user_list({app_uuid:t.get_team().uuid}).success(function(e){n.response(angular.copy(e),o,a)}).error(a)}function o(e,t,r){_(function(r){var _=angular.extend({filter_keyword:"",length:c,start_page:0,sort:!0},e),o=s(_,r),a=o.length,l=i(_,u(_,o));n.success({users:l,total:a},t)},function(e){n.error(e,r)})}function a(t,r,o){_(function(_){_.length>=l?n.success({error_code:p},r):e.create_user(t).success(r).error(o)},function(e){n.error(e,o)})}function s(e,t){if(""===e.filter_keyword)return t||[];var n=e.filter_keyword,r=new RegExp(".*"+n+".*","g"),_=[];return angular.forEach(t,function(e,t){(r.test(e.user_email)||r.test(e.user_fullname))&&_.push(e)}),_}function i(e,t){for(var n,r=e.length,_=e.start_page,o=(t.length,_*r),a=o+r,s=o,i=[];void 0!==(n=t[s++])&&a>=s;)i.push(n);return i}function u(e,t){function n(e,t){return e.updatetime>t.updatetime?-1:1}return e.sort?t.sort(n):t}var c=12,l=100,p=1e4;$;return{UP_TO_MAX_SERVICE_USERS_ERROR_CODE:p,getAppServiceUsers:_,getAppServiceUsersWithPagination:o,createServiceUser:a}}e.$inject=["yvAjax","yvUser","yvCallbackService","yvDebug"],angular.module("this_app.services").factory("yvAppPeopleService",e)}(),function(){function e(){function e(e,r,_){e&&0===e.error_code?t(e,r):n(e,_)}function t(e,t){t&&t(e)}function n(e,t){t&&t(e)}return{response:e,success:t,error:n}}e.$inject=[],angular.module("this_app.services").factory("yvCallbackService",e)}(),function(){function e(e,t,n,r,_,o,a){function s(e){return a.get()&&a.isAdminUser()?p&&p.length>0?void(e&&e(p)):void t.get_all_apps({user_uuid:a.userUUID()}).success(function(t){if(0===t.error_code){var n=t.app;angular.forEach(n,function(e,t){e.is_selected=a.userUUID()===e.user_uuid}),p=n,e&&e(n)}else e&&e([])}).error(function(t){e&&e([])}):void(e&&e([]))}function i(e,n,r){if(angular.forEach(p,function(t,n){t.is_selected=t.uuid===e.uuid}),A[e.user_uuid]){var _=A[e.user_uuid];l(_.user_response),n&&n()}else t.get_user_detail_with_password(e.user_uuid).success(function(e){if(0===e.error_code){l(e);var t={user_response:e};A[e.uuid]=t,n&&n()}else r&&r(e)}).error(function(e){r&&r(e)})}function u(){var e;return angular.forEach(p,function(t,n){t.is_selected&&(e=t)}),e}function c(){p=[]}function l(e){n.set_login_data(e),n.set_team(null)}var p=[],A={};return{getApps:s,selectApp:i,activeApp:u,clear:c}}e.$inject=["yvDebug","yvAjax","yvUser","$cookies","$rootScope","yvConstants","yvLoginedUser"],angular.module("this_app.services").factory("yvAppService",e)}()+function(){function e(){function e(){return i}function t(e){i=e}function n(){return s}function r(e){s=e}function _(){s=null,i=!0}function o(){var e=!1;return n()&&"ADMIN"===n().user_status&&(e=!0),e}function a(){return n()?n().uuid:void 0}var s,i=!1;return{isLogined:e,setLogined:t,get:n,update:r,logout:_,isAdminUser:o,userUUID:a}}e.$inject=[],angular.module("this_app.services").factory("yvLoginedUser",e)}(),angular.module("this_app").controller("LogoutCtrl",["$scope","$cookies","$state","$timeout","yvAjax",function(e,t,n,r,_){console.log("LOGOUT.................................."),_.logout(WebRole),delete t.PORTALUSER_SESSION_ID,delete t.PORTALADMIN_SESSION_ID,r(function(){n.go("app.main",null,{reload:!0})},100)}]),angular.module("this_app").controller("SignInCtrl",["$scope","$state","$stateParams","$timeout","$translate","$cookieStore","yvAjax","yvUtil","yvUser","yvTransTags","yvConstants","yvDebug","yvLogin","yvAppService",function(e,t,n,r,_,o,a,s,i,u,c,l,p,A){e.user={user_status:"OWNER_2",is_service_user:!1,user_fullname:"",user_email:"",user_password:"",app_name:"",user_password_is_visible:!1,password_input_type:"password"};var E=function(n){var r=sha1(e.user.user_password);a.login({user_email:e.user.user_email,user_password:r}).success(function(n){0==n.error_code?(p.updateActiveUserCookieKey(n.user_uuid),p.updateLoginedUserCookieKey(n.user_uuid,n.access_token),a.get_user_detail_with_password(n.user_uuid).success(function(n){if(l.d("get_user_detail",n),0!=n.error_code)return void yvLog.w("get detail failed %s",n);p.updateLoginedUser(angular.copy(n)),p.setLogined(!0);var r=c.USER_STATUS[n.user_status];return"SERVICE"==n.user_status?(p.updateActiveUser(n),void e.start_ppmessage(!0)):("OWNER_2"==n.user_status&&t.go(r),void l.d("do not know how to handle user_status: %s",n.user_status))})):e.toast_error_string("SIGNIN_FAILED_TAG")}).error(function(t){e.toast_error_string("SIGNIN_FAILED_TAG")})};e.sign_in_form_submit=function(){E(e.user)},e.show_user_password=function(t){t?(e.user.user_password_is_visible=!0,e.user.password_input_type="text"):(e.user.user_password_is_visible=!1,e.user.password_input_type="password")}}]),angular.module("this_app").controller("AppCtrl",["$window","$scope","$rootScope","$location","$state","$translate","$timeout","$cookies","$filter","toastr","yvAjax","yvUser","yvUtil","yvDebug","yvLogin","yvAppService","yvConstants","yvLoginedUser","yvTransTags",function(e,t,n,r,_,o,a,s,i,u,c,l,p,A,E,T,d,g,m){t._languages=[{lang:"zh-CN"},{lang:"en"}];var f=E.isLogined();t.menuStyle={"margin-top":"24px"};t.toggle_mobile_menu=function(e){$(".mobile-menu").hasClass("active")?($(".mobile-menu").removeClass("active"),$(".mobile-menu-items").removeClass("active")):($(".mobile-menu").addClass("active"),$(".mobile-menu-items").addClass("active"))},t.click_mobile_items=function(e){$(".mobile-menu").hasClass("active")&&($(".mobile-menu").removeClass("active"),$(".mobile-menu-items").removeClass("active"))},t.switch_to=function(e){var t="app."+e;_.go(t)},t.main=function(){window.open("https://ppmessage.com")},t.switch_to_english=function(){l.set_language("en"),o.use("en")},t.switch_to_chinese=function(){l.set_language("zh-CN"),o.use("zh-CN")},t.is_lang_english=function(){var e=l.get_language();return null==e?!0:"en"==e},t.get_user_fullname=function(){return E.getLoginedUser()?E.getLoginedUser().user_fullname:""},t.is_logined=function(){return f},t.login=function(){_.go("app.signin")},t.show_settings_menu=function(){return g.get()&&"OWNER_2"===g.get().user_status},t.start_ppmessage=function(e){var t=l.get_uuid(),n=l.get_password(),r=l.get_email(),_={user_email:r,user_password:n,user_uuid:t};console.log("autologin with: %s",_),_=p.base64_encode(JSON.stringify(_));var o=p.http_protocol(location.hostname),a=o+location.host+"/ppkefu/#/noapp/auto-login/"+_;e?self.location=a:window.open(a,"ppmessage-"+r)},t.logout=function(){c.logout("user");a(function(){E.logout(),f=!1,T.clear(),t.menuStyle["margin-top"]="24px",t.isAdminUser=!1}),a(function(){_.go("app.signin")})},t.toast_error_string=function(e){var t=i("translate")("global."+e);a(function(){u.error(t)})},t.toast_success_string=function(e){var t=i("translate")("global."+e);a(function(){u.success(t)})},t.$on("$destroy",function(){}),n.$on(d.BROADCAST_EVENT_KEY.LOGIN_FINISHED,function(e,t){f=!0})}]),angular.module("this_app").controller("SettingsCtrl",["$scope","$rootScope","$cookies","$state","$timeout","$translate","yvAjax","yvUtil","yvUser","yvConstants","yvDebug",function(e,t,n,r,_,o,a,s,i,u,c){e.left_style=null,e.right_style=null,e.icon_style=null,e.should_show_update_string=function(){return e._update_string&&e._update_string.length>0},e.get_update_string=function(){return e._update_string},e.close_update_string=function(){_(function(){e._update_string=""})},e.set_update_string=function(t){_(function(){e._update_string=t}),_(function(){e._update_string=""},5e3)},e.set_flash_style=function(t){var n=[{left_style:"toast-style-success-l",right_style:"toast-style-success-r",icon_style:"glyphicon glyphicon-ok"},{left_style:"toast-style-warning-l",right_style:"toast-style-warning-r",icon_style:"glyphicon glyphicon-info-sign"},{left_style:"toast-style-fail-l",right_style:"toast-style-fail-r",icon_style:"glyphicon glyphicon-remove"}];_(function(){var r=n[t];e.left_style=r.left_style,e.right_style=r.right_style,e.icon_style=r.icon_style})},e.get_left_flash_style=function(){return e.left_style},e.get_right_flash_style=function(){return e.right_style},e.get_icon=function(){return e.icon_style},e.action_toast=function(t,n,r){e.set_flash_style(n),e.set_update_string(t.lang[r])};var l=function(){e._update_string=""};e.refresh_settings_menu=function(){for(var e=angular.element(".menu-item"),t=0;t<e.length;t++)angular.element(e[t]).removeClass("selected");e=document.getElementById(r.current.name),e&&e.className&&e.className.indexOf("selected")<0&&(e.className+=" selected")},l()}]),angular.module("this_app").controller("ApplicationProfileCtrl",["$scope","$stateParams","$state","$translate","$timeout","yvTransTags","yvAjax","yvUtil","yvUser","yvDebug","yvConstants","yvLogin",function(e,t,n,r,_,o,a,s,i,u,c,l){var p="",A=function(t,n){e.set_flash_style(t),e.set_update_string(e.lang[n])};e.can_delete=!1,e.team_info={};var E=function(){e.team_info={app_uuid:null,app_name:null,ppconsole_thirdparty:{api_uuid:null,api_key:null,api_secret:null},ppkefu_thirdparty:{api_uuid:null,api_key:null,api_secret:null}}};e.show_remove_modal=function(){jQuery("#remove_app").modal({show:!0})},e.remove_app=function(){var e={user_uuid:i.get_uuid(),app_uuid:i.get_team().uuid};a.remove_app(e).success(function(e){if(console.log("remove app info back",e),jQuery("#remove_app").modal("hide"),0==e.error_code){A("flash-notice","application.profile.REMOVE_APP_SUCCESS_TAG");var t="";i.set_team_uuid(t),E()}else-1==e.error_code?A(1,"application.profile.UPDATE_APP_LACK_PARAMS_TAG"):1==e.error_code?A(1,"application.profile.UPDATE_APP_NOT_EXIST_TAG"):2==e.error_code?A(2,"application.profile.PERMISSION_DENIED_TAG"):A(1,"application.profile.UPDATE_FAILED_TAG")}).error(function(e){jQuery("#remove_app").modal("hide"),A(2,"application.profile.UPDATE_FAILED_TAG")})};var T=function(){return p==e.team_info.app_name?(A("flash-error","application.profile.NO_CHANGE_TAG"),!1):s.regexp_check(e.team_info.app_name)?String(e.team_info.app_name).length>63?(A(1,"application.profile.WORDS_OUT_OF_LENGTH_TAG"),e.team_info.app_name=p,!1):!0:(A(1,"application.profile.NOT_REGULAR_WORDS_TAG"),e.team_info.app_name=p,!1)};e.modify=function(){if(console.log("$scope.team_info is",e.team_info),T()){var t={app_uuid:i.get_team().uuid,app_name:e.team_info.app_name};a.update_app_info(t).success(function(t){console.log("update team info back",t),0==t.error_code?(e.team_info.app_name=t.app_name,p=t.app_name,i&&i.get_team()&&(i.get_team().app_name=p),A(0,"application.profile.UPDATE_SUCCESSFULLY_TAG")):-1==t.error_code?A(1,"application.profile.UPDATE_APP_LACK_PARAMS_TAG"):1==t.error_code?A(1,"application.profile.UPDATE_APP_NOT_EXIST_TAG"):A(1,"application.profile.UPDATE_FAILED_TAG")}).error(function(e){console.log("error data is",e),A(2,"application.profile.UPDATE_FAILED_TAG")})}};var d=function(){var t=i.get_team();if(null==t)return void console.error("no team info");var n=t.uuid;e.team_info.app_uuid=n,e.team_info.app_name=t.app_name;var r=a.get_api_info({app_uuid:n,user_uuid:i.get_uuid()});r.success(function(t){e.team_info.ppconsole_thirdparty=t.ppconsole_thirdparty,e.team_info.ppkefu_thirdparty=t.ppkefu_thirdparty})},g=function(){l.prepare(function(e){d()},{$scope:e,onRefresh:function(){d()}})},m=function(){var t=[];for(var n in o.en.application.profile){var r="application.profile."+n;t.push(r)}e.translate=function(){},s.translate(e,"lang",t,e.translate)},f=function(){E(),e.refresh_settings_menu(),m(),g()};f(),u.attach("yvBasicInfo",{yvUser:i})}]),angular.module("this_app").controller("IntegrateCtrl",["$scope","$rootScope","$stateParams","$cookies","$state","$timeout","$http","$translate","yvTransTags","yvAjax","yvUtil","yvUser","yvConstants","yvLogin",function(e,t,n,r,_,o,a,s,i,u,c,l,p,A){e.enterprise={link:null,code:null};var E=function(){var t=l.get_team();if(null!=t){var n={uuid:t.uuid,app_name:encodeURI(t.app_name||"")},r=location.protocol+"//"+location.host+"/ppcom/enterprise/",_=c.base64_encode(JSON.stringify(n));o(function(){e.enterprise.link=r+_})}},T=function(){var t=l.get_team(),n=location.protocol+"//"+location.host,r="<script> window.ppSettings = {";r+="app_uuid:",r=r+"'"+t.uuid+"'};",r+="(function(){var w=window,d=document;function l(){var a=d.createElement('script');a.type='text/javascript';a.async=!0;a.src='{SERVER}/ppcom/assets/pp-library.min.js';var b=d.getElementsByTagName('script')[0];b.parentNode.insertBefore(a,b)}w.attachEvent?w.attachEvent('onload',l):w.addEventListener('load',l,!1);})()</script>",r=r.replace("{SERVER}",n),e.enterprise.code=r},d=function(){E(),T()},g=function(){A.prepare(function(e){d()},{$scope:e,onRefresh:d})},m=function(){var t,n=[];for(t in i.en.application.profile){var r="application.profile."+t;n.push(r)}e.translate=function(){},c.translate(e,"lang",n,e.translate)},f=function(){m(),e.refresh_settings_menu(),g()};f()}]),angular.module("this_app").controller("SettingsAccountCtrl",["$scope","$cookies","$state","$timeout","$translate","yvAjax","yvUtil","yvUser","yvTransTags","yvConstants","yvLogin","yvDebug",function(e,t,n,r,_,o,a,s,i,u,c,l){var p=function(t,n){e.set_flash_style(t),e.set_update_string(e.lang[n])},A=function(){e.user={user_password_is_visible:!1,password_input_type:"password"}};e.user={user_password_is_visible:!1,password_input_type:"password"},e.show_user_password=function(t){t?(e.user.user_password_is_visible=!0,e.user.password_input_type="text"):(e.user.user_password_is_visible=!1,e.user.password_input_type="password")},e.changepassword=function(e){if(e.user_new_password&&s.get_uuid()){var t,n=sha1(e.user_old_password);if(n!==s.get_password())t="settings.account.OLDPASSWORD_MISMATCH_TAG";else{var r=a.validator.validateRepeatPassword(e.user_new_password,e.user_new_password);switch(r){case a.validator.ERR_CODE.MIN_LENGTH_LIMIT:t="signup.NO_PASSWORD_TAG";break;case a.validator.ERR_CODE.MAX_LENGTH_LIMIT:t="signup.LENGTH_OUT_OF_RANGE_TAG";break;case a.validator.ERR_CODE.CONTAIN_WHITESPACE_AT_HEAD_OR_TAIL:t="signup.ERR_PASSWORD_CONTAINS_WHITESPACE_AT_HEAD_OR_TAIL";break;case a.validator.ERR_CODE.REPEAT_PASSWORD_MIS_MATCH:t="signup.PASSWORD_NOT_MATCHED_TAG"}}if(void 0!==t)return void p(1,t);var _={app_uuid:s.get_team().uuid,user_uuid:s.get_uuid(),user_password:sha1(e.user_new_password),old_password:n},i=o.update_user(_);i.success(function(t){0==t.error_code?(s.set_password(sha1(e.user_new_password)),p(0,"settings.profile.UPDATE_SUCCESSFULLY_TAG"),A()):(p(1,"settings.profile.UPDATE_FAILED_TAG"),A())}),i.error(function(){p(2,"settings.profile.UPDATE_FAILED_TAG"),A()})}};var E=function(){c.prepare(function(e){switch(e){case c.ERROR_CODE.OK:break;case c.ERROR_CODE.STATUS_ILLEGAL:}})},T=function(){var t=[];for(var n in i.en.settings.account){var r="settings.account."+n;t.push(r)}for(var n in i.en.settings.profile){var r="settings.profile."+n;t.push(r)}for(var n in i.en.signup){var r="signup."+n;t.push(r)}e.translate=function(){},a.translate(e,"lang",t,e.translate)},d=function(){e.refresh_settings_menu(),T(),E()};d()}]),angular.module("this_app").controller("SettingsProfileCtrl",["$scope","yvAjax","yvUtil","yvUser","yvTransTags","yvLogin",function(e,t,n,r,_,o){e.change=function(e){};var a=function(t,n){e.set_flash_style(t),e.set_update_string(e.lang[n])};e.submit=function(e){if(null!=e.fullname){var n={app_uuid:r.get_team().uuid,user_uuid:r.get_uuid(),user_fullname:e.fullname},_=t.update_user(n);_.success(function(t){console.log(t),0==t.error_code?(r.set_fullname(e.fullname),a(0,"settings.profile.UPDATE_SUCCESSFULLY_TAG")):a(1,"settings.profile.UPDATE_FAILED_TAG")}),_.error(function(e){a(2,"settings.profile.UPDATE_FAILED_TAG")})}};var s=function(){e.user={fullname:r.get_fullname(),email:r.get_email()}},i=function(){o.prepare(function(e){s()},{$scope:e,onRefresh:s})},u=function(){var t=[];for(var r in _.en.settings.profile){var o="settings.profile."+r;t.push(o)}e.translate=function(){console.log("trans lang %o",e.lang)},n.translate(e,"lang",t,e.translate)};_init=function(){e.refresh_settings_menu(),u(),i()},_init()}]),angular.module("this_app").controller("ApplicationPeopleCtrl",["$scope","$cookies","$stateParams","$state","$timeout","$translate","yvAjax","yvUtil","yvUser","yvTransTags","yvConstants","yvDebug","yvAppPeopleService","yvLogin",function(e,t,n,r,_,o,a,s,i,u,c,l,p,A){function E(){return{password:null,user_password_is_visible:!1,password_input_type:"password"}}function T(){var t=null;return angular.forEach(e.group,function(e){e.selected&&(t=e)}),null!=t&&(t.user_uuid=t.uuid,t.email=t.user_email,t.name=t.user_fullname,t.password=""),t}e.selected_all={seleted:!1},e.create_user_direct=E(),e.edit_user_direct=E();var d=function(t,n){e.set_flash_style(t),e.set_update_string(e.lang[n])};e.email_handler=function(e){return e.length<=22?e:e.substring(0,18)+".."},e.show_edit_modal=function(){jQuery("#batch_edit_user").modal({show:!0}),e.edit_user_direct=T()},e.show_create_modal=function(){jQuery("#batch_create_user").modal({show:!0}),e.create_user_direct=E()},e.show_edit_user_password=function(t){t?(e.edit_user_direct.user_password_is_visible=!0,e.edit_user_direct.password_input_type="text"):(e.edit_user_direct.user_password_is_visible=!1,e.edit_user_direct.password_input_type="password")},e.show_user_password=function(t){t?(e.create_user_direct.user_password_is_visible=!0,e.create_user_direct.password_input_type="text"):(e.create_user_direct.user_password_is_visible=!1,e.create_user_direct.password_input_type="password")},e.edit_service_user_form_submit=function(){var t={app_uuid:i.get_team().uuid,user_uuid:e.edit_user_direct.user_uuid,user_email:e.edit_user_direct.email,user_fullname:e.edit_user_direct.name};e.edit_user_direct.password&&e.edit_user_direct.password.length>0&&(t.user_password=sha1(e.edit_user_direct.password)),a.update_user(t).success(function(e){0==e.error_code?d(0,"application.people.EDIT_APP_USER_SUCCESS_TAG"):d(1,"application.people.EDIT_APP_USER_FAILED_TAG")}).error(function(e){d(1,"application.people.EDIT_APP_USER_FAILED_TAG")}),jQuery("#batch_edit_user").modal("hide"),e.page_app_user()},e.create_service_user_form_submit=function(){var t=(i.get_uuid(),{user_status:"SERVICE",is_service_user:!0,app_uuid:i.get_team().uuid,user_email:e.create_user_direct.email,user_fullname:e.create_user_direct.name,user_password:sha1(e.create_user_direct.password)});p.createServiceUser(t,function(t){var n="application.people.CREATE_APP_USER_SUCCESSFULLY_TAG",r=0;
switch(t.error_code){case a.API_ERR.NO_ERR:break;case a.API_ERR.EX_USER:n="application.people.ALREADY_IS_APP_USER_TAG",r=1;break;case p.UP_TO_MAX_SERVICE_USERS_ERROR_CODE:n="application.people.QUOTA_REACH_TO_UPPER_LIMIT_TAG",r=1;break;default:n="application.people.CREATE_APP_USER_FAILED_TAG",r=1}jQuery("#batch_create_user").modal("hide"),e.page_app_user(),d(r,n)},function(t){jQuery("#batch_create_user").modal("hide"),e.page_app_user(),d(2,"application.people.CREATE_APP_USER_FAILED_TAG")})},e.should_show_edit_button=function(){var t=[];return angular.forEach(e.group,function(e){e.selected&&this.push(e)},t),1==t.length},e.should_show_remove_button=function(){var t=[];return angular.forEach(e.group,function(e){e.selected&&this.push(e)},t),t.length>0},e.show_remove_modal=function(){e.to_be_removed_users=[],angular.forEach(e.group,function(e){e.selected&&this.push(e)},e.to_be_removed_users),e.to_be_removed_users.length&&jQuery("#remove_user").modal({show:!0})},e.check_all_changed=function(t){angular.forEach(e.group,function(e){1==!e.is_owner_user&&(e.selected=t)})},e.$watch(function(e){var t=!0;return angular.forEach(e.group,function(e){e.selected&&(t=!1)}),t},function(e,t,n){var r=!0;angular.forEach(n.group,function(e){e.selected&&(r=!1)}),r&&(n.selected_all.selected=!1)}),e.remove_users=function(t){if(null!=t&&0!=t.length){var n=[];angular.forEach(t,function(e){this.push(e.uuid)},n);var r=a.leave_app(n,i.get_team().uuid);r.success(function(t){return 0!=t.error_code?(jQuery("#remove_user").modal("hide"),e.selected_all.selected=!1,e.page_app_user(),d(1,"application.people.REMOVE_APP_USER_FAILED_TAG"),void console.error(t)):(jQuery("#remove_user").modal("hide"),e.selected_all.selected=!1,e.page_app_user(),d(0,"application.people.REMOVE_APP_USER_SUCCESSFULLY_TAG"),void 0)}),r.error(function(t){jQuery("#remove_user").modal("hide"),e.selected_all.selected=!1,e.page_app_user(),d(2,"application.people.REMOVE_APP_USER_FAILED_TAG"),console.error(t)})}},e.page_app_user=function(t){var n=e.search_value||"",r=e.page_number=t||1;e.items_per_page=12,p.getAppServiceUsersWithPagination({sort:!0,filter_keyword:$.trim(n),start_page:r-1,length:e.items_per_page},function(t){e.group=t.users,e.total_items=t.total},function(t){e.group=[],e.total_items=0})};var g=function(){var t=i.get_team();return null==t?void console.error("no team info"):void e.page_app_user()},m=function(){A.prepare(function(e){g()},{$scope:e,onRefresh:g})},f=function(){var t=[];for(var n in u.en.application.people){var r="application.people."+n;t.push(r)}e.translate=function(){},s.translate(e,"lang",t,e.translate)},S=function(){e.refresh_settings_menu(),f(),m()};S(),l.attach("yvAppPeopleController",{$scope:e})}]),angular.module("this_app").controller("ApplicationWelcomeCtrl",["$scope","$state","$stateParams","$timeout","yvAjax","yvUser","yvTransTags","yvUtil","yvDebug","yvLogin",function(e,t,n,r,_,o,a,s,i,u){e.current_bubble={ppcom_launcher_color:"#54c6d6",ppcom_launcher_color_changed:!1};var c=function(t,n){_.update_app_info(t).success(function(t){console.log(t),0==t.error_code?(e.action_toast(e,0,"application.welcome.UPDATE_APP_SUCCESSFULLY_TAG"),n&&n()):-1==t.error_code?e.action_toast(e,1,"application.welcome.UPDATE_APP_LACK_PARAMS_TAG"):1==t.error_code?e.action_toast(e,1,"application.welcome.UPDATE_APP_NOT_EXIST_TAG"):e.action_toast(e,1,"application.welcome.UPDATE_ENCOUNTER_AN_ERROR_TAG")}).error(function(t){console.log(t),e.action_toast(e,2,"application.welcome.UPDATE_ENCOUNTER_AN_ERROR_TAG")})},l=function(){var t=o.get_team();return null==t?void console.error("no team info"):void r(function(){e.current_bubble={welcome_message:t.welcome_message,ppcom_launcher_color:t.ppcom_launcher_color?t.ppcom_launcher_color:"#54c6d6",ppcom_launcher_style:t.ppcom_launcher_style?t.ppcom_launcher_style:"DEFAULT",app_route_policy:t.app_route_policy,show_ppcom_hover:t.show_ppcom_hover,ppcom_powered_by_name:t.ppcom_powered_by_name,ppcom_powered_by_link:t.ppcom_powered_by_link,ppcom_powered_by_visible:t.ppcom_powered_by_visible},E()})},p=function(t,n){for(var r in t)if(r.length>512)return void e.action_toast(e,1,"application.welcome.WELCOME_WORDS_OUT_OF_LENGTH_TAG");n&&n(t)},A=function(){e.current_bubble.ppcom_launcher_color_changed=!1},E=function(){e.$watch("current_bubble.ppcom_launcher_color",function(t,n){return n!==t?void(e.current_bubble.ppcom_launcher_color_changed=!0):void 0})};e.change_ppcom_color=function(){if(e.current_bubble.ppcom_launcher_color_changed){var t={app_uuid:o.get_team().uuid,ppcom_launcher_color:e.current_bubble.ppcom_launcher_color};c(t,A)}},e.update_team_info=function(t){if(!t)return void e.action_toast(e,1,"application.welcome.NO_CHANGED_TAG");var n={app_uuid:o.get_team().uuid,welcome_message:e.current_bubble.welcome_message};p(n,c)},e.get_launcher_style=function(){var t=null;e.current_bubble&&e.current_bubble.ppcom_launcher_color&&(t=e.current_bubble.ppcom_launcher_color),null==t&&(t="#54c6d6");var n={"background-color":t};return n},e.get_launcher_color_name=function(){var t=null;return e.current_bubble&&e.current_bubble.ppcom_launcher_color&&(t=e.current_bubble.ppcom_launcher_color),null==t&&(t="#54c6d6"),t};var T=function(){u.prepare(function(e){l()},{$scope:e,onRefresh:l})},d=function(){var t=[];for(var n in a.en.application.welcome){var r="application.welcome."+n;t.push(r)}e.translate=function(){},s.translate(e,"lang",t,e.translate)},g=function(){e.refresh_settings_menu(),d(),T()};g(),i.attach("yvAppWelcomeController",{$scope:e,yvUser:o})}]),angular.module("this_app").controller("ApplicationMessageRouteCtrl",["$scope","$state","$stateParams","$timeout","yvAjax","yvUser","yvTransTags","yvUtil","yvLogin",function(e,t,n,r,_,o,a,s,i){e.current_app={app_route_policy:null};var u=function(t,n){e.set_flash_style(t),e.set_update_string(e.lang[n])},c=function(e,t){_.update_app_info(e).success(function(e){console.log(e),0==e.error_code?(u(0,"application.welcome.UPDATE_APP_SUCCESSFULLY_TAG"),t&&t()):-1==e.error_code?u(1,"application.welcome.UPDATE_APP_LACK_PARAMS_TAG"):1==e.error_code?u(1,"application.welcome.UPDATE_APP_NOT_EXIST_TAG"):u(1,"application.welcome.UPDATE_ENCOUNTER_AN_ERROR_TAG")}).error(function(e){console.log(e),u(2,"application.welcome.UPDATE_ENCOUNTER_AN_ERROR_TAG")})},l=function(){var t=o.get_team();return null==t?void console.error("no team info"):(e.current_app.app_route_policy=o.get_team().app_route_policy,void r(function(){A()}))},p=function(e){var t={app_uuid:o.get_team().uuid,app_route_policy:e};c(t)},A=function(){e.$watch("current_app.app_route_policy",function(e,t){t!==e&&(console.log("update app route policy from: %s to: %s",t,e),p(e))})},E=function(){i.prepare(function(e){l()},{$scope:e,onRefresh:l})},T=function(){var t=[];for(var n in a.en.application.welcome){var r="application.messageroute."+n;t.push(r)}e.translate=function(){},s.translate(e,"lang",t,e.translate)},d=function(){e.refresh_settings_menu(),T(),E()};d()}]),angular.module("this_app").controller("GroupingCtrl",["$scope","$state","$stateParams","$timeout","$filter","yvAjax","yvUser","yvTransTags","yvUtil","yvDebug","yvAppGroupingService","yvLogin",function(e,t,n,r,_,o,a,s,i,u,c,l){function p(){A(T),U()}function A(t,n){c.getGroupList(function(n){e.team.group_list.length=0,angular.forEach(n,function(t,n){e.team.group_list.push(t)}),t&&t(n)},function(e){u.w(e),n&&n({})})}function E(e,t){A(e,t)}function T(){c.getTeamServiceUserList(function(t){e.team.service_user_list=t,e.team.current_list={user_list:t,name:null,uuid:null,type:"TEAM"},U(),e.showCheckAllColumn=!1},function(t){e.team.service_user_list=t})}function d(t){e.selected_list=[],c.getGroupServiceUserList(t,function(t){e.team.current_list.user_list=t,e.showCheckAllColumn=!0},void 0,{reuse:!0})}function g(){var t=I(e.new_group_name,e.new_group_desc);e.create_group_error.name_error=t.nameError,t.nameError.length>0||(e.create_group_error.desc_error=t.descError,t.descError.length>0||c.createGroup({new_group_name:e.new_group_name,new_group_desc:e.new_group_desc,new_group_is_distributor:e.new_group_is_distributor},function(t){jQuery("#create_group").modal("hide"),e.new_group_name=null,C(0,"application.grouping.CREATE_GROUP_SUCCESS_TAG"),E()},function(e){C(2,"application.grouping.ENCOUNTER_AN_ERROR_TAG")}))}function m(e,t){c.removeGroup(e.uuid,function(e){C(0,"application.grouping.REMOVE_GROUP_SUCCESS_TAG"),E(T)},function(e){C(2,"application.grouping.ENCOUNTER_AN_ERROR_TAG")})}function f(e,t){return e.uuid!==c.UNGROUPED_GROUP_INFO.uuid}function S(e){return e.uuid!==c.UNGROUPED_GROUP_INFO.uuid}function G(t,n){return e.showCheckAllColumn&&t.uuid!==h.uuid}function R(t,n){if(0==e.selected_list.length)return void C(1,"application.grouping.NO_GROUP_USER_SELECTED_TAG");for(var r=[],_=0;_<e.selected_list.length;_++)r.push(e.selected_list[_].uuid);e.selectedAll=!1,e.selected_list=[];var o=e.team.current_list.user_list.length;M(o),c.switchGroup({group_uuid:t.uuid,user_list:r,old_group_uuid:h.uuid},function(t){C(0,"application.grouping.ADD_GROUP_USER_SUCCESS_TAG"),e.selected_list=[],E(function(){O(h)})},function(e){C(2,"application.grouping.ENCOUNTER_AN_ERROR_TAG")})}function O(e,t){h=e,i.isNull(t)&&(t=N(e.uuid)),d(e.uuid),r(function(){U("colored_group_"+String(t))})}function v(t){var n=e.team.group_list[t],r=RegExp("^[0-9]{1,2}$");if(!r.test(n.group_visible_order_for_ppcom)||!r.test(n.start_time)||!r.test(n.end_time))return C(1,"application.grouping.MODIFY_INFO_IS_NOT_SUITABLE_TAG"),void A();if(n.end_time>24||n.start_time>n.end_time)return C(1,"application.grouping.MODIFY_INFO_IS_NOT_SUITABLE_TAG"),void A();var _={app_uuid:a.get_team().uuid,group_uuid:n.uuid,group_visible_order_for_ppcom:n.group_visible_order_for_ppcom,group_route_algorithm:n.group_route_algorithm,group_visible_for_ppcom:n.checked?"True":"False"};o.update_group(_).success(function(n){e.team.group_list[t].visible_for_ppcom=_.group_visible_for_ppcom,0==n.error_code?C(0,"application.grouping.UPDATE_GROUP_SUCCESS_TAG"):(console.log(n),C(1,"application.grouping.ENCOUNTER_AN_ERROR_TAG"))}).error(function(e){console.log(e),C(2,"application.grouping.ENCOUNTER_AN_ERROR_TAG")})}function P(){var t=I(e.selected_group.group_name,e.selected_group.group_desc,e.selected_group.uuid);e.update_group_error.name_error=t.nameError,t.nameError.length>0||(e.update_group_error.desc_error=t.descError,t.descError.length>0||c.updateGroup({app_uuid:a.get_team().uuid,group_uuid:e.selected_group.uuid,group_name:e.selected_group.group_name,group_desc:e.selected_group.group_desc,is_distributor:e.selected_group.is_distributor},function(e){jQuery("#update_group").modal("hide"),0==e.error_code?(C(0,"application.grouping.UPDATE_GROUP_SUCCESS_TAG"),E(function(){O(h)})):C(1,"application.grouping.ENCOUNTER_AN_ERROR_TAG")},function(e){C(2,"application.grouping.ENCOUNTER_AN_ERROR_TAG")}))}function U(e){e=i.isNull(e)?"default_highlight":e;for(var t=angular.element(".not_exist"),n=0;n<t.length;n++)angular.element(t[n]).css("border-bottom","1px solid #d9d9d9"),angular.element("#default_highlight").css("border-bottom","1px solid #d9d9d9");angular.element("#"+e).css("border-bottom","3px solid red")}function N(t){var n,r=_("orderBy")(e.team.group_list,"createtime");return angular.forEach(r,function(e,r){void 0===n&&e.uuid===t&&(n=r)}),n}function I(t,n,r){var _=["",e.lang["application.grouping.GROUP_NAME_EXISTED_TAG"],e.lang["application.grouping.NO_GROUP_NAME"],e.lang["application.grouping.UNREGULAR_WORDS_TAG"],e.lang["application.grouping.WORDS_OUT_OF_LENGTH_TAG"]],o=function(t){var n=angular.copy(t);return n[2]=e.lang["application.grouping.NO_GROUP_DESC"],n}(_),a=_[c.checkGroupNameValid(r,t)],s=o[c.checkGroupDescValid(n)];return{nameError:a,descError:s}}var h={};e.get_all_service=T,e.groupListFilter=f,e.create_group=g,e.remove_group=m,e.isGroupEditable=S,e.switch_group=R,e.switchGroupListFilter=G,e.checkout_to_group=O,e.modify_group=v,e.update_group=P,e.update_group_error={name_error:"",desc_error:""},e.create_group_error={name_error:"",desc_error:""},e.team={group_list:[],current_list:{user_list:[],name:null,uuid:null,type:"TEAM"},service_user_list:[]},e.selectedAll=!1,e.selected_list=[],e.selected_group=null,e.showCheckAllColumn=!1;var C=function(t,n){e.set_flash_style(t),e.set_update_string(e.lang[n])};e.show_create_group_modal=function(){e.new_group_desc="",e.new_group_name="",e.new_group_is_distributor=!1,e.create_group_error.name_error="",e.create_group_error.desc_error="",jQuery("#create_group").modal({show:!0})},e.show_update_group_modal=function(t,n){e.selected_group=angular.copy(t),e.update_group_error.name_error="",e.update_group_error.desc_error="",jQuery("#update_group").modal({show:!0})},e.handle_group_name=function(e,t){return e.length>t?e.substring(0,t)+"...":e},e.show_identify=function(t){return t==a.get_email()?e.lang["application.grouping.ADMIN_USER_TAG"]:e.lang["application.grouping.SERVICE_USER_TAG"]},e.checkAll=function(){var t=e.team.current_list.user_list.length;e.selectedAll?M(t):L(t),e.selectedAll=!e.selectedAll};var L=function(t){e.selected_list=[];for(var n=0;t>n;n++)angular.element("#current_list_"+String(n))[0].checked=!0;for(var n=0;t>n;n++)e.selected_list.push(e.team.current_list.user_list[n])},M=function(t){for(var n=0;t>n;n++)angular.element("#current_list_"+String(n))[0].checked=!1;e.selected_list=[]},y=function(){e.$watch("selected_list.length",function(t,n){return t!==n?void(t==e.team.current_list.user_list.length?e.selectedAll=!0:e.selectedAll=!1):void 0})};e.select_user=function(e){var t="#current_list_"+String(e);angular.element(t)[0].checked?D(e):w(e)};var D=function(t){e.selected_list.push(e.team.current_list.user_list[t])},w=function(t){var n=e.selected_list.indexOf(e.team.current_list.user_list[t]);e.selected_list.splice(n,1)};e.get_group_start_service_time=function(e){var t=e.split("-")[0].split(":")[0];return t},e.get_group_end_service_time=function(e){var t=e.split("-")[1].split(":")[0];return t};var b=function(){var e=a.get_team();return null==e?void console.error("no team info"):(p(),void y())},F=function(){l.prepare(function(e){b()},{$scope:e,onRefresh:b})},Y=function(){var t=[];for(var n in s.en.application.grouping){var r="application.grouping."+n;t.push(r)}e.translate=function(){c.setUngroupedName(),F()},i.translate(e,"lang",t,e.translate)},$=function(){e.refresh_settings_menu(),Y()};$(),u.attach("yvAppGroupingService",c).attach("yvAppGroupingController",{$scope:e,highlight:U,curGroup:function(){return h},autoDetectCurrentGroupIndex:N,checkGroupError:I})}]),angular.module("this_app").controller("SettingsPushCtrl",["$scope","$cookies","$state","$timeout","$translate","yvAjax","yvUtil","yvUser","yvTransTags","yvConstants","yvLogin","yvDebug",function(e,t,n,r,_,o,a,s,i,u,c,l){e.push={enable_apns_push:!1,enable_gcm_push:!1,enable_mqtt_push:!1,apns_combination_pem_file:null,apns_combination_pem_data:null,apns_combination_pem_password:null,gcm_api_key:null},e.submit_push=function(){var t=angular.copy(e.push);delete t.apns_combination_pem_file,t.app_uuid=s.get_team().uuid,o.update_app_info(t).success(function(){e.toast_success_string("UPDATE_PUSH_CONFIG_SUCCESS_TAG")}).error(function(){e.toast_error_string("UPDATE_PUSH_CONFIG_FAILED_TAG")})},e.read_pem=function(t){var n=new FileReader;n.onload=function(t){return function(t){e.push.apns_combination_pem_data=t.target.result}}(t),n.readAsDataURL(t)};var p=function(){c.prepare(function(t){switch(t){case c.ERROR_CODE.OK:e.push.enable_apns_push=s.get_team().enable_apns_push,e.push.enable_gcm_push=s.get_team().enable_gcm_push,e.push.enable_mqtt_push=s.get_team().enable_mqtt_push,e.push.apns_combination_pem_data=s.get_team().apns_combination_pem_data,e.push.apns_combination_pem_password=s.get_team().apns_combination_pem_password,e.push.gcm_api_key=s.get_team().gcm_api_key;break;case c.ERROR_CODE.STATUS_ILLEGAL:}})},A=function(){var t=[];for(var n in i.en.settings.push){var r="settings.push."+n;t.push(r)}e.translate=function(){},a.translate(e,"lang",t,e.translate)},E=function(){e.refresh_settings_menu(),A(),p()};E()}]),angular.module("this_app").controller("StatisticsOverviewCtrl",["$scope","$state","$timeout","$translate","$stateParams","yvUser","yvAjax","yvUtil","yvTransTags","yvConstants","yvLogin",function(e,t,n,r,_,o,a,s,i,u,c){e.card_number={};var l=null,p=null,A="customer",E=function(){var t=a.ppconsole_get_overview_number(o.get_team().uuid);t.success(function(t){if(0==t.error_code)for(var n in t.number)t.number.hasOwnProperty(n)&&(e.card_number[n]=t.number[n])})},T=function(e){null!=l&&(l.destroy(),l=null);var t={labels:[],datasets:[{fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:[]}]},n=document.getElementById("realtime-statistics"),r=n.getContext("2d");for(var _ in e)t.labels.push(_+""),t.datasets[0].data.push(e[_+""][_+""]);l=new Chart(r).Line(t,{tooltipTemplate:"<%= value %>",responsive:!0,animationStep:40})},d=function(e,t,n){var r={labels:[],datasets:[{fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:[]}]},_=moment.range(e,t);_.by("days",function(e){r.labels.push(e.format("MM-DD")),r.datasets[0].data.push(n[e.format("YYYY-MM-DD")])}),p&&(p.destroy(),p=null);var o=document.getElementById("history-statistics"),a=o.getContext("2d");p=new Chart(a).Line(r,{tooltipTemplate:"<%= value %>",responsive:!0,animationStep:40})},g=function(e){var t=angular.element(e.target).parent().parent().children();angular.forEach(t,function(e){angular.element(e).hasClass("active")&&angular.element(e).removeClass("active")}),angular.element(e.target).parent().hasClass("active")||angular.element(e.target).parent().addClass("active")},m=function(e){var t=a["ppconsole_get_real_time_"+e+"_number"],n=t(o.get_team().uuid);n.success(function(e){0==e.error_code&&T(e.number)}),n.error(function(e){console.error(e)})},f=function(e,t,n){var r=a["ppconsole_get_"+n+"_number_by_range"],_=r(o.get_team().uuid,e.format("YYYY-MM-DD"),t.format("YYYY-MM-DD"));_.success(function(n){0==n.error_code&&d(e,t,n.number)}),_.error(function(e){console.error(e)})};e.draw_realtime_message_number=function(e){g(e),m("message")},e.draw_realtime_customer_number=function(e){g(e),m("customer")},e.draw_realtime_service_number=function(e){g(e),m("service")},e.draw_history_message_number=function(e){g(e),A="message";var t=moment().subtract("days",30),n=moment();f(t,n,A)},e.draw_history_customer_number=function(e){g(e),A="customer";var t=moment().subtract("days",30),n=moment();f(t,n,A)},e.draw_history_service_number=function(e){g(e),A="service";var t=moment().subtract("days",30),n=moment();f(t,n,A)},e.selecteddate=function(e,t){f(e,t,A)};var S=function(){var e=moment().subtract("days",30),t=moment();f(e,t,"customer"),E(),m("customer")},G=function(){var t=[];for(var n in i.en.statistics.overview){var r="statistics.overview."+n;t.push(r)}e.translate=function(){},s.translate(e,"lang",t,e.translate)},R=function(){G(),e.refresh_settings_menu(),c.prepare(function(e){S()},{$scope:e,onRefresh:S})};R()}]),angular.module("this_app").controller("StatisticsHistoryMessageCtrl",["$scope","$state","$timeout","$translate","$stateParams","yvAjax","yvUser","yvConstants","yvLog","yvUtil","yvTransTags","yvLogin",function(e,t,n,r,_,o,a,s,i,u,c,l){var p=10,A=5,E=p,T=[],d=function(){l.prepare(function(e){f(S,O)},{$scope:e,onRefresh:function(){f(S,O)}})},g=function(){var t=[];for(var n in c.en.statistics.historymessages){var r="statistics.historymessages."+n;t.push(r)}e.translate=function(){},u.translate(e,"lang",t,e.translate)},m=function(e){var t=function(e){return e.update_ts};e&&e.sort(function(e,n){var r=t(e),_=t(n);return r>=_?-1:1})},f=function(t,n){o.get_app_conversation_list({app_uuid:a.get_team().uuid}).success(function(n){var r=[];n.list&&$.each(n.list,function(t,n){var _=!1;if(!_){var o={user_uuid:n.create_user&&n.create_user.uuid,user_name:n.create_user&&n.create_user.user_fullname,user_image:n.create_user&&u.iconUtil.getIcon(n.create_user.user_icon),news_abbr:u.messageUtil.getMessageSummary(e.lang,n.latest_message&&n.latest_message.message_subtype,n.latest_message&&n.latest_message.body),news_count:n.message_total_count,news_date:u.messageUtil.getMessageFormatedDate(n.latest_message),con_uuid:n.uuid,update_ts:u.messageUtil.getConversationUpdateTsInSeconds(n)};r.push(o)}}),m(r),t&&t(r)}).error(function(e){n&&n(e)})},S=function(t){T=t;var n=T.length;P(n),n>0&&e.toggle_page(e.pages[0])},G=function(t,n){var r=t.data,_=r.list;e.messages=[],_.forEach(function(t){e.messages.unshift(h(t,n))})},R=function(t){e.set_flash_style("flash flash-error"),e.set_update_string(t)},O=function(t){R(e.lang["statistics.historymessages.MESSAGE_GET_ERROR_TAG"])},v=function(t){R(e.lang["statistics.historymessages.MESSAGE_GET_ERROR_TAG"])},P=function(t){var n=parseInt(t/E),r=n*E!=t?n+1:n;if(e.total_pages=r,e.total_pages>1)if(e.total_pages>A)for(var _=1;A>=_;_++){var o={};o.page_num=_,o.is_active=!1,e.pages.push(o)}else for(var _=1;_<=e.total_pages;_++){var o={};o.page_num=_,o.is_active=!1,e.pages.push(o)}else e.pages.push({page_num:1,is_active:!1})},U=function(e,t){return e==t?"DIR_IN":"DIR_OUT"},N=function(t){var r=[];T.forEach(function(e){var n=e.news_date;n.split()[0]==t&&r.push(e)}),n(function(){e.news_list=r})},I=function(e){return[]},h=function(e,t){var n=null;n="AP"==e.from_type?u.iconUtil.getIcon():u.iconUtil.getIcon(e.from_user.user_icon);var r=JSON.parse(e.message_body),_={conversation_uuid:r.ci,from_uuid:r.fi,message_direction:U(e.from_uuid,t),message_duration:null,message_file:null,message_id:r.id,message_mime:null,message_name:null,message_size:null,message_body:e.body,message_status:"RECV_NEW",message_subtype:r.ms,message_thumbnail:null,message_timestamp:r.ts,show_profile:!1,show_timestamp:!0,task_uuid:null,to_uuid:r.ti,to_type:r.tt,message_type:"NOTI",conversation_type:e.conversation_type,from_user:e.from_user,user_icon:n};return _};e.messages=[],e.news_list=[],e.cur_page=-1,e.pages=[],e.search_conversations=function(){if(""!=e.search_target){var t=I(e.search_target);return e.search_target="",0==t.length?void alert("No Results"):void n(function(){e.news_list=t})}},e.select_date=function(e,t){var n=e.format("YYYY-MM-DD");N(n)},e.show_pre_window=function(t){e.messages=[];var n=t.con_uuid,r=t.user_uuid;o.get_history_messages({conversation_uuid:n,page_offset:-1}).then(function(e){G(e,r)},v)},e.toggle_page=function(t){if(t.page_num!=e.cur_page){var n=T.slice((t.page_num-1)*E,t.page_num*E);e.news_list=n,e.pages.forEach(function(e){e.is_active=!1}),t.is_active=!0,e.cur_page=t.page_num}},e.pre_pages=function(){var t=e.pages[0].page_num;if(1!=t){var n=0;n=t>=A?A:t-1;for(var r=1;n>=r;r++){var _={};_.page_num=t-r,_.is_active=!1,e.pages.unshift(_)}e.pages=e.pages.slice(0,A),e.toggle_page(e.pages[e.pages.length-1])}},e.back_pages=function(){var t=e.pages[e.pages.length-1].page_num;if(t!=e.total_pages){var n=0,r=e.total_pages-t;n=r>=A?A:r,e.pages=[];for(var _=1;n>=_;_++){var o={};o.page_num=t+_,o.is_active=!1,e.pages.push(o)}e.toggle_page(e.pages[0])}};var C=function(){e.refresh_settings_menu(),g(),d()};C()}]),angular.module("this_app").directive("focusMe",function(){return{restrict:"A",link:function(e,t,n){t[0].focus()}}}),angular.module("this_app").directive("uniform",["$timeout",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,r,_){n.uniform({userID:!1}),t.$watch(function(){return _.$modelValue},function(){e(jQuery.uniform.update,0)})}}}]),angular.module("this_app").directive("slimScroll",function(){"use strict";return{restrict:"A",link:function(e,t,n){var r=[],_={},o=function(){n.slimScroll&&(_=e.$eval(n.slimScroll)),$(t).slimScroll({destroy:!0}),$(t).slimScroll(_)},a=function(){angular.forEach(r,function(e){e()}),r=[]},s=function(){o(),r.push(e.$watchCollection(n.slimScroll,o))};r.push(e.$on("$destroy",a)),s()}}}),angular.module("this_app").directive("dateRange",["$translate","$rootScope",function(e,t){return{restrict:"A",scope:{onApply:"&",hasPredefinedRanges:"=",isSingle:"="},link:function(n,r,_){var o=function(){var t=["calendar.TODAY_TAG","calendar.YESTERDAY_TAG","calendar.LAST_7_DAYS_TAG","calendar.LAST_30_DAYS_TAG","calendar.THIS_MONTH_TAG","calendar.LAST_MONTH_TAG","calendar.APPLY_LABEL_TAG","calendar.CANCEL_LABEL_TAG","calendar.FROM_LABEL_TAG","calendar.TO_LABEL_TAG","calendar.CUSTOM_RANGE_LABEL_TAG","calendar.monthname.JANUARY_TAG","calendar.monthname.FEBRUARY_TAG","calendar.monthname.MARCH_TAG","calendar.monthname.APRIL_TAG","calendar.monthname.MAY_TAG","calendar.monthname.JUNE_TAG","calendar.monthname.JULY_TAG","calendar.monthname.AUGUST_TAG","calendar.monthname.SEPTEMBER_TAG","calendar.monthname.OCTOBER_TAG","calendar.monthname.NOVEMBER_TAG","calendar.monthname.DECEMBER_TAG"];e(t).then(function(t){var _=e.use(),o=t,a=null;1==n.hasPredefinedRanges&&(a={},a[o["calendar.TODAY_TAG"]]=[moment(),moment()],a[o["calendar.YESTERDAY_TAG"]]=[moment().subtract("days",1),moment().subtract("days",1)],a[o["calendar.LAST_7_DAYS_TAG"]]=[moment().subtract("days",6),moment()],a[o["calendar.LAST_30_DAYS_TAG"]]=[moment().subtract("days",29),moment()],a[o["calendar.THIS_MONTH_TAG"]]=[moment().startOf("month"),moment().endOf("month")],a[o["calendar.LAST_MONTH_TAG"]]=[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]);var s={};s.applyLabel=o["calendar.APPLY_LABEL_TAG"],s.cancelLabel=o["calendar.CANCEL_LABEL_TAG"],s.fromLabel=o["calendar.FROM_LABEL_TAG"],s.toLabel=o["calendar.TO_LABEL_TAG"],s.customRangeLabel=o["calendar.CUSTOM_RANGE_LABEL_TAG"],s.daysOfWeek=["Su","Mo","Tu","We","Th","Fr","Sa"];var i=[];i[0]=o["calendar.monthname.JANUARY_TAG"],i[1]=o["calendar.monthname.FEBRUARY_TAG"],i[2]=o["calendar.monthname.MARCH_TAG"],i[3]=o["calendar.monthname.APRIL_TAG"],i[4]=o["calendar.monthname.MAY_TAG"],i[5]=o["calendar.monthname.JUNE_TAG"],i[6]=o["calendar.monthname.JULY_TAG"],i[7]=o["calendar.monthname.AUGUST_TAG"],i[8]=o["calendar.monthname.SEPTEMBER_TAG"],i[9]=o["calendar.monthname.OCTOBER_TAG"],i[10]=o["calendar.monthname.NOVEMBER_TAG"],i[11]=o["calendar.monthname.DECEMBER_TAG"],s.monthNames=i,s.firstDay=1,r.daterangepicker({linkedCalendars:!0,opens:"left",minDays:2,maxDays:30,singleDatePicker:n.isSingle,startDate:n.isSingle?moment():moment().subtract("days",30),endDate:moment(),format:"YYYY/MM/DD",dateLimit:{days:30}},function(e,t){e.locale(_),t.locale(_),n.onApply()(e,t)})})};t.$on("$translateChangeSuccess",o),o()}}}]),function(){function e(){return{restrict:"A",link:function(e,t,n){t.attr("target","_blank")}}}angular.module("this_app").directive("yvHrefBlank",e)}(),angular.module("this_app").directive("clipboard",function(){return{restrict:"A",link:function(e){console.log("entering....");var t=$(e).attr("id");t||($(e).attr("id","clipboard"+Date.now()),t=$(e).attr("id"));var n=new ZeroClipboard("#"+t);n.on("ready",function(e){console.log("begin copy"),n.on("success",function(e){console.log("ok")}),n.on("aftercopy",function(e){console.log("end copy....")})})}}}),angular.module("this_app").directive("yvcolorpicker",["$timeout",function(e){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){t.ColorPickerSliders({placement:"right",color:r.$modelValue,previewformat:"hex",swatches:!0,sliders:!0,hsvpanel:!0,onchange:function(t,n){e.$apply(function(){r.$setViewValue(n.tiny.toHexString())})}}),r.$render=function(){t.val(r.$modelValue),t.change()}}}}]),angular.module("this_app").directive("yvMessage",["$rootScope","$timeout","yvConstants","yvType","yvUtil",function(e,t,n,r,_){function o(t,o,a){function s(){t.message.show_profile=!1}t.isFileMessage=function(e){return r.is_file(e)},t.isVideoMessage=function(e){return r.is_video(e)},t.isGPSLocationMessage=function(e){return r.is_gps_location(e)},t.isTextMessage=function(e){return r.is_text(e)},t.isTxtMessage=function(e){return r.is_txt(e)},t.isImageMessage=function(e){return r.is_image(e)},t.isAudioMessage=function(e){return r.is_audio(e)},t.isCardMessage=function(e){return r.is_single_card(e)||r.is_multiple_card(e)},t.viewImage=function(e){},t.viewLocation=function(e){},t.viewCard=function(e){},t.showAlertIcon=function(e){return!(!r.is_right(e)||e.message_status!==n.SEND_STATUS.SEND_ERROR)},t.showMouth=function(e){return!r.is_image(e)&&!r.is_gps_location(e)},t.viewProfile=function(e){t.message.show_profile=!0},t.getUserIcon=function(e){return e.user_icon},t.getMessageClass=function(e){var t="";return r.is_left(e)?t+=" yv-left ":r.is_right(e)&&(t+=" yv-right "),t+=" yv-pc "},t.shouldShowTimestamp=function(e){var n=t.lastMessage;if(!n)return!0;var r=n.message_timestamp,_=e.message_timestamp,o=_-r;return o>60},t.getTimestamp=function(e){var t=1e3*e.message_timestamp;return _.formateTimestamp(t)},t.getFontStyle=function(){return{}},t.$on("$destroy",function(){e.$broadcast("event:stop-play-audio")}),s()}return{restrict:"E",scope:{message:"=",isLast:"=",lastMessage:"="},link:o,templateUrl:"templates/directive/message.html"}}]),angular.module("this_app").directive("yvTextMessage",[function(){function e(e,t,n){t.html(e.message.message_body)}return{restrict:"E",replace:!0,scope:{message:"="},link:e,template:"<pre class='yv-chat-text'></pre>"}}]),angular.module("this_app").directive("yvTxtMessage",["yvUtil","yvLog",function(e,t){function n(t,n,r){function _(t){var r=e.fileUtil.getFileDownloadUrl(JSON.parse(t.message_body).fid);e.fileUtil.getRemoteTextFileContent(r,function(e){n.text(e)},function(e){n.text(e)})}_(t.message)}return{restrict:"E",replace:!0,scope:{message:"="},link:n,template:"<pre class='yv-chat-text'></pre>"}}]),angular.module("this_app").directive("yvImageMessage",["yvUtil","yvLog",function(e,t){function n(t,n,r){function _(t){var r=t.message_body,_=e.iconUtil.getIcon(JSON.parse(r).orig);n.find("img").attr("src",_)}_(t.message)}return{restrict:"E",replace:!0,scope:{message:"="},link:n,template:'<div class="yv-chat-image"><img></div>'}}]),angular.module("this_app").directive("yvFileMessage",["$translate","yvUtil","yvLog",function(e,t,n){function r(n,r,_){var o=JSON.parse(n.message.message_body),a=r.find(".yv-chat-file");e(["statistics.historymessages.MESSAGE_FILE_TYPE_TAG","statistics.historymessages.MESSAGE_IMAGE_TYPE_TAG","statistics.historymessages.MESSAGE_TXT_TYPE_TAG"]).then(function(e){a.text(t.messageUtil.getMessageSummary(e,"FILE",n.message.message_body)).attr("href",t.fileUtil.getFileDownloadUrl(o.fid,o.name))})}return{restrict:"E",replace:!0,scope:{message:"=",lang:"="},link:r,template:"<div class='yv-chat-div'><a class='yv-chat-file'></a></div>"}}]),angular.element(document).ready(function(){angular.bootstrap(document,["this_app"])});